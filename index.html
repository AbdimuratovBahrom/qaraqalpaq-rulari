<!DOCTYPE html>
<html lang="kaa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Qaraqalpaq urƒ±wlarƒ± - Tolƒ±q shejire</title>
  <meta name="description" content="Tolƒ±q shejire: Qaraqalpaq urƒ±wlarƒ± h√°m tuwƒ±slƒ±q baylanƒ±slardƒ± k√∂rsetetin tarƒ±yxƒ±y sayt.">

    
    <style>
        :root {
            --primary-bg: #0f1419;
            --secondary-bg: #1a1f2e;
            --accent-red: #e74c3c;
            --accent-orange: #e67e22;
            --accent-yellow: #f1c40f;
            --gold: #f1c40f;
            --accent-green: #2ecc71;
            --accent-blue: #3498db;
            --accent-purple: #9b59b6;
            --accent-cyan: #1abc9c;
            --text-primary: #ecf0f1;
            --text-secondary: #bdc3c7;
            --border-color: #34495e;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            padding-top: 80px;
        }

        /* HEADER STYLES */
        header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: rgba(10,12,16,0.95);
            border-bottom: 2px solid var(--gold);
            padding: 1rem 2rem;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            height: 70px;
        }

        .logo { 
            display: flex; 
            align-items: center; 
            gap: 10px;
        }
        
        .logo a { 
            font-family: 'Cormorant Garamond', serif; 
            color: var(--gold); 
            font-size: 1.8rem; 
            margin: 0;
            text-decoration: none;
        }
        
        /* –ë—É—Ä–≥–µ—Ä –º–µ–Ω—é –∫–Ω–æ–ø–∫–∞ */
        .burger-menu {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
        }
        
        .burger-bar {
            width: 100%;
            height: 3px;
            background: var(--gold);
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .burger-menu.active .burger-bar:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .burger-menu.active .burger-bar:nth-child(2) {
            opacity: 0;
        }
        
        .burger-menu.active .burger-bar:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
        
        .view-switch {
            display: flex;
            gap: 0.5rem;
            background: rgba(255,255,255,0.1);
            padding: 0.25rem;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        /* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */
        @media (max-width: 968px) {
            .burger-menu {
                display: flex;
            }
            
            .view-switch {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: rgba(10,12,16,0.98);
                flex-direction: column;
                padding: 1rem;
                border-bottom: 2px solid var(--gold);
                border-radius: 0;
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
            }
            
            .view-switch.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }
            
            .view-btn {
                width: 100%;
                text-align: center;
                padding: 1rem;
            }
        }
        
        .view-btn {
            padding: 0.5rem 1.5rem;
            border-radius: 16px;
            border: none;
            background: transparent;
            color: #8892b0;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 0.9rem;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .view-btn:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.1);
        }
        
        .view-btn.active {
            background: var(--gold);
            color: #000;
            font-weight: 600;
            max-width: 170px;
            text-align: center;
            margin: 0 auto;
        }

        .container { 
            display: flex; 
            height: calc(100vh - 80px);
            overflow: hidden; 
            position: relative;
        }
        
        .tree-panel { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            background: rgba(15, 20, 25, 0.98); 
            transition: width 0.3s ease;
        }
        
        /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è */
        .info-panel {
            width: 450px; 
            background: var(--secondary-bg); 
            border-left: 3px solid var(--accent-orange);
            padding: 20px; 
            overflow-y: auto; 
            box-shadow: -5px 0 25px rgba(0,0,0,0.4);
            position: relative;
            transition: transform 0.3s ease, width 0.3s ease;
            transform: translateX(0);
        }
        
        /* –°–∫—Ä—ã—Ç–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ */
        .info-panel.collapsed {
            transform: translateX(100%);
            width: 0;
            padding: 0;
            overflow: hidden;
            border-left: none;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ */
        .close-panel-btn {
            position: sticky;
            top: 10px;
            left: 400px;
            background: var(--accent-red);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s;
        }
        
        .close-panel-btn:hover {
            background: #c0392b;
            transform: scale(1.1);
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ (–ø–ª–∞–≤–∞—é—â–∞—è) */
        .open-panel-btn {
            position: fixed;
            right: 20px;
            bottom: 100px;
            background: var(--gold);
            color: #000;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5em;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(241, 196, 15, 0.4);
            transition: all 0.3s;
        }
        
        .open-panel-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(241, 196, 15, 0.6);
        }
        
        .open-panel-btn.visible {
            display: flex;
        }
        
        h1 { text-align: center; color: var(--accent-yellow); margin-bottom: 5px; font-size: 1.8em; }
        .subtitle { text-align: center; color: var(--text-secondary); margin-bottom: 15px; font-size: 0.8em; }
        .tree { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .branch { display: flex; flex-direction: column; align-items: center; margin: 3px; }
        .node {
            background: var(--secondary-bg); border: 2px solid var(--border-color); border-radius: 6px;
            padding: 6px 10px; cursor: pointer; transition: all 0.3s;
            min-width: 80px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.2); font-size: 0.8em;
        }
        .node:hover { transform: translateY(-2px); border-color: var(--accent-yellow); }
        .node.active { border-color: var(--accent-yellow); box-shadow: 0 0 10px rgba(241, 196, 15, 0.4); }
        .level-0 .node { background: linear-gradient(135deg, #e74c3c, #c0392b); font-size: 1.1em; font-weight: bold; padding: 10px 18px; }
        .level-1 .node { background: linear-gradient(135deg, #e67e22, #d35400); font-size: 0.95em; font-weight: bold; }
        .level-2 .node { background: linear-gradient(135deg, #f1c40f, #f39c12); color: #2c3e50; font-weight: bold; }
        .level-3 .node { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .level-4 .node { background: linear-gradient(135deg, #3498db, #2980b9); font-size: 0.75em; }
        .level-5 .node { background: linear-gradient(135deg, #9b59b6, #8e44ad); font-size: 0.7em; min-width: 70px; }
        .level-6 .node { background: linear-gradient(135deg, #1abc9c, #16a085); font-size: 0.65em; min-width: 60px; }
        .node-title { font-weight: bold; font-size: 0.9em; }
        .node-subtitle { font-size: 0.7em; opacity: 0.9; }
        .connector { width: 2px; height: 12px; background: var(--accent-orange); margin: -2px auto; }
        .children { display: flex; gap: 4px; margin-top: 10px; flex-wrap: wrap; justify-content: center; }
        .info-header { border-bottom: 2px solid var(--accent-orange); padding-bottom: 10px; margin-bottom: 12px; }
        .info-title { font-size: 1.4em; color: var(--accent-yellow); margin-bottom: 5px; }
        .info-type { color: var(--accent-orange); font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; }
        .info-section { margin-bottom: 12px; background: rgba(255,255,255,0.03); padding: 12px; border-radius: 5px; border-left: 3px solid var(--accent-blue); }
        .info-section h3 { color: var(--accent-cyan); margin-bottom: 8px; font-size: 0.9em; display: flex; align-items: center; gap: 8px; }
        .info-section p { color: var(--text-secondary); line-height: 1.5; font-size: 0.9em; text-align: justify; }
        .tamga-box { background: rgba(231, 76, 60, 0.15); border: 2px solid var(--accent-red); border-radius: 8px; padding: 15px; text-align: center; margin: 12px 0; }
        .tamga-symbol { font-size: 2em; color: var(--accent-yellow); font-weight: bold; margin-bottom: 5px; }
        .tamga-label { font-size: 0.8em; color: var(--text-secondary); text-transform: uppercase; }
        .uran-box { background: rgba(46, 204, 113, 0.15); border: 2px solid var(--accent-green); border-radius: 8px; padding: 15px; text-align: center; margin: 12px 0; }
        .uran-text { font-size: 1.4em; color: var(--accent-green); font-weight: bold; font-style: italic; margin-bottom: 5px; }
        .uran-label { font-size: 0.8em; color: var(--text-secondary); text-transform: uppercase; }
        .stats-box { background: rgba(52, 152, 219, 0.1); border: 1px solid var(--accent-blue); border-radius: 6px; padding: 10px; margin: 10px 0; text-align: center; }
        .stats-number { font-size: 1.3em; color: var(--accent-yellow); font-weight: bold; }
        /* .legend { position: fixed; bottom: 10px; left: 10px; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 6px; font-size: 0.75em; z-index: 100; } */
        .legend { 
    position: sticky; 
    bottom: 10px; 
    left: 10px; 
    background: rgba(0,0,0,0.9); 
    padding: 10px; 
    border-radius: 6px; 
    font-size: 0.75em; 
    z-index: 100; 
    align-self: flex-start;
    width: fit-content;
    margin-top: auto;
}
        .legend-item { display: flex; align-items: center; gap: 5px; margin: 2px 0; }
        .legend-color { width: 12px; height: 12px; border-radius: 2px; }
        .stats { position: fixed; top: 90px; right: 475px; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 6px; font-size: 0.8em; z-index: 100; transition: right 0.3s ease; }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤ */
        @media (max-width: 1024px) {
            .stats { right: 10px; top: 90px; }
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 968px) { 
            .stats { 
                right: 10px; 
                top: 80px; 
                font-size: 0.65em;
                max-width: 150px;
            } 

            .legend {
                display: none;
            }
            
            
            .info-panel { 
                width: 100%; 
                position: fixed; 
                bottom: 0; 
                left: 0; 
                height: 60vh; 
                transform: translateY(100%); 
                transition: transform 0.3s ease;
                z-index: 1000;
                border-left: none;
                border-top: 3px solid var(--accent-orange);
            } 
            
            .info-panel.active { 
                transform: translateY(0); 
            }
            
            .info-panel.collapsed {
                transform: translateY(100%);
            }
            
            header { 
                padding: 0.5rem 1rem; 
            }
            
            body { padding-top: 70px; }
            .container { height: calc(100vh - 70px); }
            
            .open-panel-btn {
                bottom: 20px;
                right: 20px;
            }
            .search-box input {
                position: absolute;
                top: 47px;
            }
        }

        @media (max-width: 765px) {
            .stats { display: none; }
        }
        
        .search-box { position: fixed; top: 72px; left: 10px; z-index: 100; }
        .search-box input { padding: 6px 10px; border-radius: 15px; border: 1px solid var(--accent-blue); background: rgba(0,0,0,0.9); color: white; width: 180px; font-size: 0.85em; }
        .highlight { 
            animation: pulse 1.5s infinite;
            border-color: var(--accent-yellow) !important;
            border: solid 5px var(--accent-yellow) !important;
        }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7); } 70% { box-shadow: 0 0 0 12px rgba(241, 196, 15, 0); } 100% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0); } }
        
        /* Hierarchy styles */
        .hierarchy-chain {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(230, 126, 34, 0.1));
            border: 2px solid var(--accent-yellow);
            border-radius: 8px;
            padding: 15px;
            margin: 12px 0;
        }
        .hierarchy-item {
            display: flex;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px dashed rgba(241, 196, 15, 0.3);
        }
        .hierarchy-item:last-child {
            border-bottom: none;
            font-weight: bold;
            color: var(--accent-yellow);
        }
        .hierarchy-arrow {
            margin: 0 10px;
            color: var(--accent-orange);
        }
        .hierarchy-level {
            background: var(--accent-yellow);
            color: #000;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.7em;
            margin-right: 8px;
            min-width: 60px;
            text-align: center;
        }
        .descendants-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .descendant-group {
            margin-bottom: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
            padding: 8px;
        }
        .descendant-parent {
            font-weight: bold;
            color: var(--accent-cyan);
            margin-bottom: 5px;
            font-size: 0.85em;
        }
        .descendant-children {
            padding-left: 15px;
            font-size: 0.8em;
            color: var(--text-secondary);
        }
        .descendant-child {
            padding: 2px 0;
            display: flex;
            align-items: center;
        }
        .descendant-bullet {
            width: 6px;
            height: 6px;
            background: var(--accent-green);
            border-radius: 50%;
            margin-right: 8px;
        }

        .lang-switch {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: 1rem;
    padding-left: 1rem;
    border-left: 1px solid rgba(212,175,55,0.3);
}

.lang-btn {
    /* padding: 0.1rem 0.1rem; */
    border-radius: 10px;
    border: 1px solid var(--gold);
    background: transparent;
    color: var(--gold);
    cursor: pointer;
    font-size: 0.65rem;
    font-weight: 400;
    transition: all 0.3s;
    text-decoration: none;
}
.lang-btn1 {
    padding: 0.4rem 0.4rem;
    border-radius: 8px;
    background: transparent;
    color: var(--gold);
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.3s;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
}
.lang-btn img {
    width: 65px;
    height: 65px;
    margin-bottom: 4px;
    border-radius: 50%;
    vertical-align: middle;
}
.lang-btn1 img {
    width: 43px;
    height: 43px; 
    border-radius: 50%;
    vertical-align: middle;
}

.lang-btn:hover {
    background: rgba(212,175,55,0.1);
    border: 1px solid var(--gold);
}

.lang-btn.active {
    width: 53px;
    height: 53px;
    border: 1px solid var(--accent-orange);
    display: flex;
    align-items: center;
    justify-content: center;
}

.lang-btn1:hover {
    border: 1px solid var(--gold);
    width: 53px;
    height: 53px;

   
}
.lang-btn1.active {
    background: #000;
    color: #000;
}

        @media (max-width: 768px) {
    .lang-switch {
        margin-left: 0;
        padding-left: 0;
        border-left: none;
        border-top: 1px solid rgba(212,175,55,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
.lang-btn1:hover {
    border: 0px solid var(--gold);
    }
    }
    
    </style>
<base target="_blank">
</head>
<body>
    <header>
        <div class="logo">
            <span style="font-size: 2rem;">üè†</span>
            <a target="_blank" href="./images/uru.jpg">URIW</a>
        </div>
        
        <!-- –ë—É—Ä–≥–µ—Ä –º–µ–Ω—é –∫–Ω–æ–ø–∫–∞ -->
        <button class="burger-menu" id="burgerMenu" aria-label="Men√∫di ashƒ±w">
            <span class="burger-bar"></span>
            <span class="burger-bar"></span>
            <span class="burger-bar"></span>
        </button>
        
        <div class="view-switch" id="viewSwitch">
            
            <a href="index.html" class="view-btn active" target="_self">üè† Bas bet</a>
            <a href="listsQQ.html" class="view-btn" target="_self">üìã Tizimler</a>
            <a href="schemeQQ.html" class="view-btn" target="_self">üå≥ Sxema</a>
            <a href="exogamyQQ.html" class="view-btn" target="_self">üíë Ekzogamiya</a>
        </div>

        <div class="lang-switch">
    <a target="_self" href="index.html" class="lang-btn active"><img src="./images/QQ_.png" alt="QQ"></a>
    <a target="_self" href="indexKZ.html" class="lang-btn1"><img src="./images/KZ.webp" alt="KZ"></a>
</div>
    </header>


        <!-- –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
    <div class="mobile-warning-marquee" id="mobileMarquee">
        <div class="marquee-wrapper">
            <div class="marquee-content">
                <span>üì± Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi  üñ•Ô∏è Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi | </span>
                <span>üì± Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi  üñ•Ô∏è Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi | </span>
                <span>üì± Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi  üñ•Ô∏è Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi | </span>
                <span>üì± Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi  üñ•Ô∏è Bul betti √∫lken ekranda qaraw usƒ±nƒ±s etiledi | </span>
            </div>
        </div>
    </div>

    <style>
        /* –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ - —Ç–æ–ª—å–∫–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        .mobile-warning-marquee {
            display: none;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, var(--accent-orange), var(--accent-red));
            color: white;
            padding: 8px 0;
            font-size: 0.9em;
            font-weight: 600;
            z-index: 999;
            overflow: hidden;
            white-space: nowrap;
            box-shadow: 0 2px 10px rgba(231, 76, 60, 0.4);
            border-bottom: 2px solid var(--gold);
        }

        .marquee-wrapper {
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .marquee-content {
            display: inline-flex;
            animation: marquee-scroll 20s linear infinite;
        }

        .marquee-content span {
            padding-right: 50px;
        }

        .marquee-content:hover {
            animation-play-state: paused;
        }

        @keyframes marquee-scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-25%);
            }
        }

        /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω–∞—Ö –º–µ–Ω—å—à–µ 967px */
        @media (max-width: 967px) {
            .mobile-warning-marquee {
                display: block;
            }
            
            body {
                padding-top: 115px !important;
            }

            
        }

        @media (max-width: 480px) {
            .marquee-content {
                animation-duration: 15s;
            }
            
            .mobile-warning-marquee {
                font-size: 0.8em;
                padding: 6px 0;
            }
        }
    </style>

    <div class="search-box"><input type="text" id="searchInput" placeholder="Izlew..." onkeyup="searchNode()"></div>
    <div class="stats" id="statsBox"><div><strong>Statistika:</strong></div><div>Arƒ±s: 2</div><div>B√≥lim: 2</div><div>Uriw: 50+</div><div>tiyre/ko'she: 300+</div></div>
    
    <div class="container">
        <div class="tree-panel" id="treePanel">
            <h1 style="margin-top: 10px;">QARAQALPAQ URIWLARI</h1>
            <div class="subtitle"></div>
            <div class="tree" id="tree"></div>
        </div>
        <div class="info-panel" id="infoPanel">
            <button class="close-panel-btn" id="closePanelBtn" title="Paneldi jabƒ±w">√ó</button>
            <div id="infoContent">
                <div class="info-header"><div class="info-title">Elementti ta≈Ñla≈Ñ</div><div class="info-type">Tam«µa, uran h√°m tariyx haqqƒ±nda ma«µlƒ±wmat alƒ±w ushƒ±n basƒ±≈Ñ</div></div>
            </div>
        </div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏ -->
    <button class="open-panel-btn" id="openPanelBtn" title="Ma«µlƒ±wmat panelin ashƒ±w">‚ÑπÔ∏è</button>
    
    <div class="legend">
        <div><strong>Ierarxiya:</strong></div>
        <div class="legend-item"><div class="legend-color" style="background: #e74c3c;"></div> Xalƒ±q</div>
        <div class="legend-item"><div class="legend-color" style="background: #e67e22;"></div> Arƒ±s</div>
        <div class="legend-item"><div class="legend-color" style="background: #f1c40f;"></div> B√≥lim/√ölken urƒ±w</div>
        <div class="legend-item"><div class="legend-color" style="background: #2ecc71;"></div> Urƒ±w</div>
        <div class="legend-item"><div class="legend-color" style="background: #3498db;"></div> Tiyre</div>
        <div class="legend-item"><div class="legend-color" style="background: #9b59b6;"></div> Ko'she</div>
        
    </div>

    <script>
const levelsMap = ['Xalƒ±q / Xalƒ±q', 'Arƒ±s', 'B√≥lim', '√ölken urƒ±w', 'Tiyre', 'Ko\'she'];

// –§–ª–∞–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∞–Ω–µ–ª–∏
let isPanelOpen = false;
let currentSelectedNode = null;

const treeData = {
    id: "root", name: "QARAQALPAQLAR", level: 0, type: "Xalƒ±q",
    info: {
        history: "Qaraqalpaqlar - Orta Aziyadag'ƒ± t√∫rki tilles xalƒ±q. XVI-XVIII √°sirlerde qalƒ±ptastƒ±rƒ±l«µan.",
        origin: "Negizinen No«µay ordasƒ±, Qƒ±pchaq, Qarluq taypalarƒ±nan.",
        legend: "A≈Ñƒ±z«µa s√°y, al«µashqƒ± k√≥shpendiler √ölƒ± taw √≥≈Ñirinen Aral ma≈Ñƒ±na k√≥ship kelgen.",
        tamga: "√År urƒ±wdƒ±≈Ñ √≥z tam«µasƒ±",
        uran: "√År urƒ±wdƒ±≈Ñ √≥z uranƒ±",
        population: "800 mƒ±≈Ñ adam",
        language: "Qaraqalpaq tili - t√∫rki tillerini≈Ñ qƒ±pchaq tarma«µƒ±"
    },
    children: [
        {
            id: "conyrat", name: "ARYS QO≈ÉIRAT", level: 1, type: "arƒ±s", tamga: "P (bosa«µa)", uran: "Qaqpa",
            info: {
                history: "Qo≈Ñƒ±rat - eki √∫lken arƒ±stƒ±≈Ñ biri. No«µay ordasƒ±nan.",
                origin: "No«µaylƒ±q, Qƒ±pchaq taypalarƒ± qosƒ±ndƒ±sƒ±.",
                legend: "Qo≈Ñƒ±rat - 'qandƒ± qaraqalpaq' ma'nisinde.",
                tamga: "P √°rpi - bosa«µa (esik)",
                uran: "Qaqpa - qor«µan",
                population: "9520 kibitka (40%)",
                structure: "Shulƒ±q (8 urƒ±w) h√°m Jawƒ±ngƒ±r (7 urƒ±w)"
            },
            children: [
                {
                    id: "shulyk", name: "SHULLIQ B√ìLIMI", level: 2, type: "b√≥lim",
                    info: { history: "Shulƒ±q - 8 urƒ±wdan turadƒ±.", origin: "Shulƒ±q jerini≈Ñ atawƒ±nan.", population: "5860 kibitka" },
                    children: [
                        {
                            id: "kyat", name: "QIYAT", level: 3, type: "√∫lken urƒ±w",
                            info: { history: "Qƒ±yat - Shulƒ±qtƒ±≈Ñ e≈Ñ √∫lken urƒ±wƒ±.", origin: "Qƒ±yat batƒ±rdan.", legend: "√ösh ulƒ±: √öshtanbalƒ±, Taraqtƒ±, Bal«µalƒ±.", population: "870 kibitka", tamga: "√ösh ta≈Ñba", uran: "Alataw" },
                            children: [
                                {
                                    id: "ush-tambaly", name: "√öshtanbalƒ±", level: 4, type: "tiyre",
                                    info: { history: "√ösh ta≈Ñbalƒ± - √∫sh belgisi.", tamga: "√ösh sƒ±zƒ±q", uran: "Alataw!", population: "350-400 otbasƒ±" },
                                    children: [
                                        { id: "sanmurun-k", name: "Sa≈Ñm√∫rin", level: 5, type: "ko'she", info: { tamga: "SM", uran: "Alataw!", history: "Sa≈Ñ m√∫rƒ±ndƒ±q maldan" } },
                                        { id: "aryq-kyat", name: "Arƒ±qqiyat", level: 5, type: "ko'she", info: { tamga: "AQ", uran: "Alataw!", history: "Arƒ±q deneli" } },
                                        { id: "tartuly", name: "Tartulƒ±", level: 5, type: "ko'she", info: { tamga: "TR", uran: "Alataw!", history: "Tartƒ±mdƒ±, qaysar" } },
                                        { id: "qanzhygaly-k", name: "Qanjƒ±«µalƒ±", level: 5, type: "ko'she", info: { tamga: "QJ", uran: "Alataw!", history: "Jebe saplƒ±«µƒ±" } },
                                        { id: "qatagan", name: "Qata«µan", level: 5, type: "ko'she", info: { tamga: "QT", uran: "Alataw!", history: "Solt√∫stik Jetisuw" } },
                                        { id: "qara-kyat", name: "Qaraqiyat", level: 5, type: "ko'she", info: { tamga: "QQ", uran: "Alataw!", history: "Qara≈Ñgƒ± t√∫sti" } }
                                    ]
                                },
                                {
                                    id: "taraqty", name: "Taraqtƒ±", level: 4, type: "tiyre",
                                    info: { history: "Shashaqtƒ±, √≥rnekteli", tamga: "TB", uran: "Alataw!" },
                                    children: [
                                        { id: "togyzaq", name: "Tog'ƒ±zaq", level: 5, type: "ko'she", info: { tamga: "T9", uran: "Tog'ƒ±sqan!", history: "Tog'ƒ±z √∫rpaqtan keyin" } },
                                        { id: "abas-kyat", name: "Abas", level: 5, type: "ko'she", info: { tamga: "AB", uran: "Alataw!", history: "Abas batƒ±r" } },
                                        { id: "jaltyrshy", name: "Jaltƒ±rshƒ±", level: 5, type: "ko'she", info: { tamga: "JL", uran: "Alataw!", history: "Jarqƒ±n" } },
                                        { id: "aqunqaragan", name: "Aq√∫nqarag'an", level: 5, type: "ko'she", info: { tamga: "AQQ", uran: "Alataw!", history: "Aq q√∫ndƒ±qtƒ±" } },
                                        { id: "taqay", name: "Taqay", level: 5, type: "ko'she", info: { tamga: "TQ", uran: "Alataw!" } },
                                        { id: "qarzhaubaras", name: "Qarjawbaras", level: 5, type: "ko'she", info: { tamga: "QJB", uran: "Alataw!" } }
                                    ]
                                },
                                {
                                    id: "balgaly-kyat", name: "Bal«µalƒ± Qƒ±yat", level: 4, type: "tiyre",
                                    info: { history: "Bal«µa ustag'an", tamga: "B", uran: "Alataw!", legend: "Temirshiler termini" },
                                    children: [
                                        { id: "bespishaq", name: "Bespƒ±shaq", level: 5, type: "ko'she", info: { tamga: "B5", uran: "Alataw!", history: "Bes pƒ±shaq" } },
                                        { id: "etekshi", name: "Etekshi", level: 5, type: "ko'she", info: { tamga: "ET", uran: "Alataw!", history: "Etek - qoltƒ±rawƒ±n" } },
                                        { id: "sanmurun-bk", name: "Sa≈Ñm√∫rin", level: 5, type: "ko'she", info: { tamga: "SMB", uran: "Alataw!" } },
                                        { id: "qozhaqaragan", name: "Qojaqarag'an", level: 5, type: "ko'she", info: { tamga: "QJQ", uran: "Alataw!", history: "Qoja ata" } }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "ashamayly", name: "ASHAMAYLƒ±", level: 3, type: "√∫lken urƒ±w",
                            info: { history: "Ashamay - k√≥ri –Ω–∞—à–∞—Ä k√≥rgen.", tamga: "ASH", uran: "Shulƒ±q!", population: "870 kibitka" },
                            children: [
                                { id: "saqu", name: "Saqu", level: 4, type: "tiyre", info: { tamga: "SQ", uran: "Shulƒ±q!", history: "Saqshƒ±lar" } },
                                { id: "qaraqoja", name: "Qaraqoza", level: 4, type: "tiyre", info: { tamga: "QQ", uran: "Shulƒ±q!", history: "Qara qoja" } },
                                { id: "jalangayaq", name: "Jala≈Ñayaq", level: 4, type: "tiyre", info: { tamga: "JA", uran: "Shulƒ±q!", history: "Tez j√∫giriwshi" } },
                                { id: "ajyldy", name: "Ayƒ±ldƒ±", level: 4, type: "tiyre", info: { tamga: "AY", uran: "Shulƒ±q!", history: "Ayƒ±l - otar" } },
                                {
                                    id: "qobasan", name: "Qobasan", level: 4, type: "tiyre",
                                    info: { tamga: "QBS", uran: "Shulƒ±q!", history: "Qoba - quz" },
                                    children: [
                                        { id: "aqnazar", name: "Aqnazar", level: 5, type: "ko'she", info: { tamga: "AN", uran: "Shulƒ±q!" } },
                                        { id: "jansary", name: "Jansarƒ±", level: 5, type: "ko'she", info: { tamga: "JS", uran: "Shulƒ±q!" } },
                                        { id: "otemis-q", name: "√ìtemis", level: 5, type: "ko'she", info: { tamga: "√ìT", uran: "Shulƒ±q!" } },
                                        { id: "esen", name: "Esen", level: 5, type: "ko'she", info: { tamga: "ES", uran: "Shulƒ±q!" } },
                                        { id: "tampysh", name: "Tampƒ±sh", level: 5, type: "ko'she", info: { tamga: "TM", uran: "Shulƒ±q!" } }
                                    ]
                                },
                                { id: "turkmenqara", name: "T√∫rkmenqara", level: 4, type: "tiyre", info: { tamga: "TQ", uran: "Shulƒ±q!", history: "T√∫rkmenler menen aralasqan" } },
                                { id: "jappar", name: "Jappar", level: 4, type: "tiyre", info: { tamga: "JP", uran: "Shulƒ±q!" } },
                                { id: "sary-ash", name: "Sarƒ±", level: 4, type: "tiyre", info: { tamga: "SR", uran: "Shulƒ±q!" } },
                                { id: "abyz-ash", name: "Abƒ±z", level: 4, type: "tiyre", info: { tamga: "AB", uran: "Shulƒ±q!" } },
                                { id: "aqay", name: "Aqay", level: 4, type: "tiyre", info: { tamga: "AQ", uran: "Shulƒ±q!" } },
                                { id: "pangqara", name: "Pan'qara", level: 4, type: "tiyre", info: { tamga: "PN'", uran: "Shulƒ±q!" } },
                                {
                                    id: "ush-bas", name: "√ösh bas", level: 4, type: "tiyre",
                                    info: { tamga: "√öB", uran: "Shulƒ±q!", history: "√ösh bastƒ± toqƒ±g'an" },
                                    children: [{ id: "jaman-ub", name: "Jaman", level: 5, type: "ko'she", info: { tamga: "JM", uran: "Shulƒ±q!" } }]
                                },
                                { id: "qurama", name: "Qurama", level: 4, type: "tiyre", info: { tamga: "QR", uran: "Shulƒ±q!" } }
                            ]
                        },
                        {
                            id: "koldauli", name: "QOLDAWLƒ±", level: 3, type: "√∫lken urƒ±w",
                            info: { history: "Qoldaw - opora.", tamga: "QLD", uran: "Qoldaw!", population: "1140 kibitka" },
                            children: [
                                { id: "beskempir", name: "Beskempir", level: 4, type: "tiyre", info: { tamga: "B5", uran: "Qoldaw!", history: "Bes kempir" } },
                                { id: "maishyshaly", name: "May≈üƒ±shalƒ±", level: 4, type: "tiyre", info: { tamga: "MSH", uran: "Qoldaw!", history: "Maylƒ± shƒ±sha" } },
                                { id: "qalqaman", name: "Qalqaman", level: 4, type: "tiyre", info: { tamga: "QLQ", uran: "Qoldaw!" } },
                                { id: "ghajypqaragan", name: "G'ayƒ±pqarag'an", level: 4, type: "tiyre", info: { tamga: "G'Q", uran: "Qoldaw!", history: "G'ayƒ±p bolg'an ata" } },
                                { id: "sarytan-k", name: "Sarƒ±tan", level: 4, type: "tiyre", info: { tamga: "SRT", uran: "Qoldaw!" } },
                                { id: "kulkiqozhaq", name: "K√∫lk√≠qojaq", level: 4, type: "tiyre", info: { tamga: "KQ", uran: "Qoldaw!" } },
                                { id: "jarymbet", name: "Jarƒ±mbet", level: 4, type: "tiyre", info: { tamga: "JB", uran: "Qoldaw!" } },
                                { id: "qyzylayaq", name: "Qƒ±zƒ±layaq", level: 4, type: "tiyre", info: { tamga: "QZ", uran: "Qoldaw!" } },
                                { id: "karasiraq-k", name: "Qarasiraq", level: 4, type: "tiyre", info: { tamga: "QSR", uran: "Qoldaw!" } },
                                { id: "jelqaragan", name: "Jelqarag'an", level: 4, type: "tiyre", info: { tamga: "JQ", uran: "Qoldaw!" } },
                                { id: "ulkenborik", name: "√ölkenb√≥rik", level: 4, type: "tiyre", info: { tamga: "√öB", uran: "Qoldaw!" } },
                                { id: "shylzhuyt", name: "Shƒ±ljuyt", level: 4, type: "tiyre", info: { tamga: "SHJ", uran: "Qoldaw!" } },
                                { id: "jamanqonyrat", name: "Jamanqo≈Ñƒ±rat", level: 4, type: "tiyre", info: { tamga: "JQ", uran: "Qoldaw!" } },
                                {
                                    id: "kalmaq", name: "Qalmaq", level: 4, type: "tiyre",
                                    info: { tamga: "QM", uran: "Qoldaw!", history: "Qalmaqlar menen aralasqan" },
                                    children: [
                                        { id: "adil", name: "√Ådil", level: 5, type: "ko'she", info: { tamga: "√ÅD", uran: "Qoldaw!" } },
                                        { id: "ereke", name: "Ereke", level: 5, type: "ko'she", info: { tamga: "ER", uran: "Qoldaw!" } }
                                    ]
                                },
                                { id: "jaman-aul", name: "Jaman awƒ±l", level: 4, type: "tiyre", info: { tamga: "JA", uran: "Qoldaw!" } }
                            ]
                        },
                        {
                            id: "kostambali", name: "QOSTA≈ÉBALƒ±", level: 3, type: "√∫lken urƒ±w", tamga: "II",
                            info: { history: "Eki tam«µalƒ±.", tamga: "II", uran: "Qosqa!", population: "590 kibitka" },
                            children: [
                                { id: "jangildi-k", name: "Jangildi", level: 4, type: "tiyre", info: { tamga: "JG", uran: "Qosqa!" } },
                                { id: "shirzhegen", name: "Shirjegen", level: 4, type: "tiyre", info: { tamga: "SHJ", uran: "Qosqa!" } },
                                { id: "aghabegli", name: "A«µabegli", level: 4, type: "tiyre", info: { tamga: "AB", uran: "Qosqa!" } },
                                { id: "qarynzhuan", name: "Qarƒ±njwan", level: 4, type: "tiyre", info: { tamga: "QJ", uran: "Qosqa!" } },
                                { id: "kostambali-k", name: "Qostanbalƒ±", level: 4, type: "tiyre", info: { tamga: "QT", uran: "Qosqa!" } },
                                { id: "qaraqursaq-k", name: "Qaraq√∫rsaq", level: 4, type: "tiyre", info: { tamga: "QQ", uran: "Qosqa!" } },
                                { id: "qazaqy-k", name: "Qazaqƒ±", level: 4, type: "tiyre", info: { tamga: "QZ", uran: "Qosqa!" } }
                            ]
                        },
                        {
                            id: "balgali", name: "BALƒûALƒ±", level: 3, type: "√∫lken urƒ±w",
                            info: { history: "Bal«µa ustag'an. Temirshiler.", tamga: "B", uran: "Bal«µa!", legend: "Temirshiler √∫rpa«µƒ±", population: "560 kibitka" },
                            children: [
                                { id: "aqbalgali", name: "Aqbal«µalƒ±", level: 4, type: "tiyre", info: { tamga: "AB", uran: "Bal«µa!" } },
                                { id: "nurbalgali", name: "N√∫rbal«µalƒ±", level: 4, type: "tiyre", info: { tamga: "NB", uran: "Bal«µa!" } },
                                { id: "turkmen-b", name: "T√∫rkmen", level: 4, type: "tiyre", info: { tamga: "TB", uran: "Bal«µa!" } },
                                { id: "jamanaul-b", name: "Jamanaul", level: 4, type: "tiyre", info: { tamga: "JA", uran: "Bal«µa!" } },
                                { id: "shomishti", name: "Sh√≥mishti", level: 4, type: "tiyre", info: { tamga: "SHM", uran: "Bal«µa!" } },
                                { id: "toqymbet", name: "Toqƒ±mbet", level: 4, type: "tiyre", info: { tamga: "TQ", uran: "Bal«µa!" } },
                                { id: "tazbalgali", name: "Tazbal«µalƒ±", level: 4, type: "tiyre", info: { tamga: "TB", uran: "Bal«µa!" } },
                                { id: "kostamgali-b", name: "Qostam«µalƒ±", level: 4, type: "tiyre", info: { tamga: "QS", uran: "Bal«µa!" } },
                                { id: "qaratalshy", name: "Qaratalshƒ±", level: 4, type: "tiyre", info: { tamga: "QT", uran: "Bal«µa!" } },
                                { id: "asan", name: "Asan", level: 4, type: "tiyre", info: { tamga: "AS", uran: "Bal«µa!" } },
                                { id: "arzyqul", name: "Arzƒ±qul", level: 4, type: "tiyre", info: { tamga: "AR", uran: "Bal«µa!" } }
                            ]
                        },
                        {
                            id: "kandekli", name: "Q√ÅNDEKLI", level: 3, type: "√∫lken urƒ±w", tamga: "G",
                            info: { history: "K√≥ndek - qora.", tamga: "G", uran: "K√≥ndek!", population: "730 kibitka" },
                            children: [
                                { id: "qarama-kan", name: "Qarama", level: 4, type: "tiyre", info: { tamga: "QR", uran: "K√≥ndek!" } },
                                { id: "kiikshi", name: "Kiikshi", level: 4, type: "tiyre", info: { tamga: "KSH", uran: "K√≥ndek!", history: "Kiik saqshƒ±" } },
                                { id: "toqbolat-kan", name: "Toqbolat", level: 4, type: "tiyre", info: { tamga: "TB", uran: "K√≥ndek!" } },
                                { id: "qyryqsadaq", name: "Qƒ±rƒ±qsadaq", level: 4, type: "tiyre", info: { tamga: "QS", uran: "K√≥ndek!", history: "40 sadaq" } }
                            ]
                        },
                        {
                            id: "karamoiyn", name: "QARAMOYƒ±N", level: 3, type: "√∫lken urƒ±w", tamga: "TM",
                            info: { history: "Qara moyƒ±n.", tamga: "TM", uran: "Moyƒ±n!", population: "560 kibitka" },
                            children: [
                                { id: "annakhoja", name: "Annaxoza", level: 4, type: "tiyre", info: { tamga: "AN", uran: "Moyƒ±n!", history: "Anna √°wliye" } },
                                { id: "sabalaq", name: "Sabalaq", level: 4, type: "tiyre", info: { tamga: "SB", uran: "Moyƒ±n!", history: "Saba - bala" } },
                                { id: "kotelek", name: "K√≥telek", level: 4, type: "tiyre", info: { tamga: "KT", uran: "Moyƒ±n!", history: "Torlaw" } },
                                { id: "qarlymaral", name: "Qarlƒ±maral", level: 4, type: "tiyre", info: { tamga: "QM", uran: "Moyƒ±n!" } },
                                { id: "bulkildek", name: "B√∫lkildek", level: 4, type: "tiyre", info: { tamga: "B√ö", uran: "Moyƒ±n!", history: "K√∫lew" } }
                            ]
                        },
                        {
                            id: "muyten", name: "M√öYTEN", level: 3, type: "√∫lken urƒ±w", tamga: "√ösh shanƒ±≈üqƒ±", uran: "Aqsholpan",
                            info: { history: "M√∫yƒ±n - moyƒ±n.", origin: "M√∫yten batƒ±r", tamga: "√ösh shanƒ±≈üqƒ±", uran: "Aqsholpan", population: "540 kibitka", legend: "M√∫ytenni≈Ñ √∫sh ulƒ±: Samat, Teli, Abƒ±z" },
                            children: [
                                {
                                    id: "samat", name: "Samat (5)", level: 4, type: "tiyre",
                                    info: { tamga: "SM", uran: "Aqsholpan!" },
                                    children: [
                                        { id: "baibishe", name: "B√°ybishe", level: 5, type: "ko'she", info: { tamga: "BB", uran: "Aqsholpan!" } },
                                        { id: "toqqaragan", name: "Toqalqarag'an", level: 5, type: "ko'she", info: { tamga: "TQ", uran: "Aqsholpan!" } },
                                        { id: "baimurat", name: "Baymurat", level: 5, type: "ko'she", info: { tamga: "BM", uran: "Aqsholpan!" } },
                                        { id: "jolan", name: "Jolan", level: 5, type: "ko'she", info: { tamga: "JL", uran: "Aqsholpan!" } },
                                        { id: "bekau", name: "Bekaw", level: 5, type: "ko'she", info: { tamga: "BK", uran: "Aqsholpan!" } }
                                    ]
                                },
                                {
                                    id: "teli", name: "Teli (5)", level: 4, type: "tiyre",
                                    info: { tamga: "TL", uran: "Aqsholpan!" },
                                    children: [
                                        { id: "tileuberdi", name: "Tilewberdi", level: 5, type: "ko'she", info: { tamga: "TB", uran: "Aqsholpan!" } },
                                        { id: "allaberdi", name: "Allaberdi", level: 5, type: "ko'she", info: { tamga: "AB", uran: "Aqsholpan!" } },
                                        { id: "tangirberdi", name: "Ta≈Ñirberdi", level: 5, type: "ko'she", info: { tamga: "TB", uran: "Aqsholpan!" } },
                                        { id: "mantyqaragan", name: "Mantƒ±qarag'an", level: 5, type: "ko'she", info: { tamga: "MQ", uran: "Aqsholpan!" } },
                                        { id: "molloqaragan", name: "Mollaqarag'an", level: 5, type: "ko'she", info: { tamga: "MQ", uran: "Aqsholpan!" } }
                                    ]
                                },
                                {
                                    id: "abyz-m", name: "Abƒ±z", level: 4, type: "tiyre",
                                    info: { tamga: "AB", uran: "Aqsholpan!", history: "Aqsaqal, √°wliye" },
                                    children: [{ id: "ady", name: "Adƒ±", level: 5, type: "ko'she", info: { tamga: "AD", uran: "Aqsholpan!" } }]
                                },
                                {
                                    id: "kentanau", name: "Ken'tanaw (3)", level: 4, type: "tiyre",
                                    info: { tamga: "KT", uran: "Aqsholpan!" },
                                    children: [
                                        { id: "barn", name: "Barn", level: 5, type: "ko'she", info: { tamga: "BR", uran: "Aqsholpan!" } },
                                        { id: "itaq", name: "Itaq", level: 5, type: "ko'she", info: { tamga: "IT", uran: "Aqsholpan!" } },
                                        { id: "jekensal", name: "Jekensal", level: 5, type: "ko'she", info: { tamga: "JS", uran: "Aqsholpan!" } }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "jauyngyr", name: "JAWƒ±NGƒ±R B√ìLIMI", level: 2, type: "b√≥lim",
                    info: { history: "Jawƒ±ngƒ±r - 7 urƒ±w.", population: "3660 kibitka" },
                    children: [
                        { id: "teristambaly", name: "TERISTA≈ÉBALƒ±", level: 3, type: "urƒ±w", children: [{id:"shomak",name:"Shomaq",level:4,type:"tiyre"},{id:"hangildi",name:"Xangildi",level:4,type:"tiyre"},{id:"baiqaragan",name:"Bayqarag'an",level:4,type:"tiyre"},{id:"elshibai",name:"Elshibay",level:4,type:"tiyre"},{id:"qurban-t",name:"Qurban",level:4,type:"tiyre"},{id:"togai",name:"Tog'ay",level:4,type:"tiyre"},{id:"tyle",name:"Tile",level:4,type:"tiyre"},{id:"tebegen",name:"Tebegen",level:4,type:"tiyre"},{id:"tum",name:"Tum",level:4,type:"tiyre"},{id:"tyrk",name:"T√∫rkistan",level:4,type:"tiyre"}] },
                        { id: "bakanly", name: "BAQANLƒ±", level: 3, type: "urƒ±w", children: [{id:"tanmail-b",name:"Ta≈Ñmayƒ±l",level:4,type:"tiyre"},{id:"zhananai",name:"Jaqanay",level:4,type:"tiyre"},{id:"naiman-b",name:"Nayman",level:4,type:"tiyre"},{id:"aiys-b",name:"Ayƒ±s",level:4,type:"tiyre"}] },
                        { id: "tyekli", name: "TIYEKTI", level: 3, type: "urƒ±w", children: [{id:"shishi-t",name:"Shishi",level:4,type:"tiyre",children:[{id:"shishi-kosh",name:"Shishi",level:5,type:"ko'she"}]},{id:"tumanai-t",name:"Tumanay",level:4,type:"tiyre",children:[{id:"tumanai-kosh",name:"Tumanay",level:5,type:"ko'she"}]},{id:"maulik-t",name:"M√°wlik",level:4,type:"tiyre",children:[{id:"maulik-kosh",name:"M√°wlik",level:5,type:"ko'she"}]},{id:"bairam-t",name:"Bayram",level:4,type:"tiyre",children:[{id:"bairam-kosh",name:"Bayram",level:5,type:"ko'she"}]}] },
                        { id: "yrgaqty", name: "IRƒûAQTƒ±", level: 3, type: "urƒ±w", children: [{id:"atanai-y",name:"Atanay",level:4,type:"tiyre",children:[{id:"atanai-kosh",name:"Atanay",level:5,type:"ko'she"}]},{id:"eshkili-y",name:"Eshkili",level:4,type:"tiyre",children:[{id:"eshkili-kosh",name:"Eshkili",level:5,type:"ko'she"}]},{id:"baibura-y",name:"Baybura",level:4,type:"tiyre",children:[{id:"baibura-kosh",name:"Baybura",level:5,type:"ko'she"}]},{id:"sarytan-y",name:"Sarƒ±tan",level:4,type:"tiyre",children:[{id:"sarytan-kosh",name:"Sarƒ±tan",level:5,type:"ko'she"}]}] },
                        { id: "baimaqty", name: "BAYMAQTƒ±", level: 3, type: "urƒ±w", children: [{id:"saspaq",name:"Saspaq",level:4,type:"tiyre"},{id:"uies",name:"√öyes",level:4,type:"tiyre"},{id:"tanmail-bm",name:"Ta≈Ñmayƒ±l",level:4,type:"tiyre"},{id:"zhananai-bm",name:"Jaqanay",level:4,type:"tiyre"},{id:"naiman-bm",name:"Nayman",level:4,type:"tiyre"},{id:"aiys-bm",name:"Ayƒ±s",level:4,type:"tiyre"}] },
                        { id: "kazayakty", name: "QAZAYAQTƒ±", level: 3, type: "urƒ±w", children: [{id:"anetai",name:"√Ånetay",level:4,type:"tiyre"},{id:"zharimbet-k",name:"J√°r√≠mbet",level:4,type:"tiyre"},{id:"zhundi",name:"J√∫ndi",level:4,type:"tiyre"},{id:"sadaq",name:"Sadaq",level:4,type:"tiyre"}] },
                        { id: "uygyr", name: "UYƒûƒ±R", level: 3, type: "urƒ±w", children: [{id:"shishi-u",name:"Shishi",level:4,type:"tiyre"},{id:"tumanai-u",name:"Tumanay",level:4,type:"tiyre"},{id:"sabalaq-u",name:"Sabalaq",level:4,type:"tiyre"},{id:"maulik-u",name:"M√°wlik",level:4,type:"tiyre"},{id:"bairam-u",name:"Bayram",level:4,type:"tiyre"},{id:"syrgaly",name:"Sƒ±rgalƒ±",level:4,type:"tiyre"}] }
                    ]
                }
            ]
        },
        {
            id: "onTort", name: "ARYS ON T√ìRT RUW", level: 1, type: "arƒ±s",
            info: { history: "On t√≥rt ruw - 14 urƒ±w.", population: "10260 kibitka (60%)" },
            children: [
                {
                    id: "kytaƒ±", name: "QITAY", level: 2, type: "√∫lken urƒ±w", tamga: "Q", uran: "Ullƒ± taw",
                    
                    info: { history: "E≈Ñ √∫lken urƒ±w.", tamga: "Q", uran: "Ullƒ± taw", population: "4320 kibitka" },
                    children: [
                        { id: "bessary", name: "BESSARI", level: 3, type: "urƒ±w", children: [{id:"zhunli",name:"J√∫nli",level:4,type:"tiyre"},{id:"qoyly",name:"Qoylƒ±",level:4,type:"tiyre"}] },
                        { id: "beksyyk", name: "BEKSƒ∞YIQ", level: 3, type: "urƒ±w", children: [{id:"zherger",name:"Jerger",level:4,type:"tiyre"},{id:"masai",name:"Masay",level:4,type:"tiyre"},{id:"shyghyrshy",name:"Shƒ±g'ƒ±rshƒ±",level:4,type:"tiyre"},{id:"malay",name: "Malay",level:4,type:"tiyre"}] },
                        { id: "kazayakly-k", name: "QAZAYAQLƒ±", level: 3, type: "urƒ±w", children: [{id:"kalsen",name:"K√°lsen",level:4,type:"tiyre"},{id:"kuyik",name:"K√∫yik",level:4,type:"tiyre"},{id:"myrzai",name:"Mƒ±rzay",level:4,type:"tiyre"},{id:"qylymoiyn",name:"Qƒ±lmoyƒ±n",level:4,type:"tiyre"},{id:"zhylkybai",name:"Jƒ±lqƒ±bay",level:4,type:"tiyre"},{id:"baibishe-kz",name:"B√°ybishe",level:4,type:"tiyre",children:[{id:"baibishe-kosh",name:"B√°ybishe",level:5,type:"ko'she"}]}] },
                        { id: "kaishyly", name: "QAYSHƒ±Lƒ±", level: 3, type: "urƒ±w", children: [{id:"aqymbet",name:"Aqƒ±mbet",level:4,type:"tiyre"},{id:"zhuansan",name:"Juwansan",level:4,type:"tiyre"},{id:"koterehoja",name:"K√≥terehoja",level:4,type:"tiyre"},{id:"tanamyrza",name:"Tanamƒ±rza",level:4,type:"tiyre"},{id:"baqy",name:"Baqƒ±",level:4,type:"tiyre"},{id:"sybyl",name:"Sƒ±bƒ±l",level:4,type:"tiyre"},{id:"basar",name:"Basar",level:4,type:"tiyre"},{id:"tolyq",name:"Tolƒ±q",level:4,type:"tiyre"},{id:"yaby",name:"Yabƒ±",level:4,type:"tiyre"}] },
                        { id: "aitereke", name: "√ÅYTEKE", level: 3, type: "urƒ±w", children: [{id:"zhadyq",name:"J√°diq",level:4,type:"tiyre"},{id:"yrsymbek",name:"Irsƒ±mbek",level:4,type:"tiyre"},{id:"orazymbet",name:"Orazƒ±mbet",level:4,type:"tiyre"},{id:"tangirkul",name:"Ta≈Ñirq√∫l",level:4,type:"tiyre"},{id:"bektes",name:"Bektes",level:4,type:"tiyre",children:[{id:"bektes-kosh",name:"Bektes",level:5,type:"ko'she"}]},{id:"nauriz",name:"Nawrƒ±z",level:4,type:"tiyre",children:[{id:"nauriz-kosh",name:"Nawrƒ±z",level:5,type:"ko'she"}]},{id:"maniuwli-a",name:"M√°nj√∫wli",level:4,type:"tiyre",children:[{id:"maniuwli-kosh",name:"M√°nj√∫wli",level:5,type:"ko'she"}]},{id:"tazshylyq",name:"Tazshƒ±lƒ±q",level:4,type:"tiyre",children:[{id:"tazshylyq-kosh",name:"Tazshƒ±lƒ±q",level:5,type:"ko'she"}]}] },
                        { id: "manjuwli-k", name: "MA≈ÉJ√öWLI", level: 3, type: "urƒ±w", children: [{id:"eki-shyiq",name:"Eki shƒ±yƒ±q",level:4,type:"tiyre"},{id:"qaramanjuwli",name:"Qaramanj√∫wli",level:4,type:"tiyre"},{id:"aiiereke",name:"√Åyereke",level:4,type:"tiyre"}] },
                        { id: "aralbai", name: "ARALBAY", level: 3, type: "urƒ±w", children: [{id:"aqqala",name:"Aqqala",level:4,type:"tiyre"},{id:"qalmuart-ar",name:"Qalmurat",level:4,type:"tiyre"},{id:"ogizbaishy",name:"√ìgizbayshƒ±",level:4,type:"tiyre"},{id:"baibishe-ar",name:"B√°ybishe",level:4,type:"tiyre"},{id:"tile-qusshy",name:"Tilew qusshƒ±",level:4,type:"tiyre"}] }
                    ]
                },
                {
                    id: "kypshak", name: "QIPSHAQ", level: 2, type: "√∫lken urƒ±w", tamga: "I", uran: "Toqsaba",
                    info: { history: "K√≥ne urƒ±w.", tamga: "I", uran: "Toqsaba", population: "2240 kibitka" },
                    children: [
                        { id: "kangly", name: "QA≈ÉLƒ±", level: 3, type: "urƒ±w", children: [{id:"tram",name:"Tram",level:4,type:"tiyre"},{id:"qatqangly",name:"Qatqa≈Ñlƒ±",level:4,type:"tiyre"},{id:"yrghaqly",name:"Irg'aqlƒ±",level:4,type:"tiyre"},{id:"ashamaily-k",name:"Ashamaylƒ±",level:4,type:"tiyre"},{id:"taraqty-k",name:"Taraqtƒ±",level:4,type:"tiyre"},{id:"baspak",name:"Baspaq",level:4,type:"tiyre"},{id:"aiat",name:"Ayat",level:4,type:"tiyre"},{id:"bosyn",name:"Bosƒ±n",level:4,type:"tiyre"},{id:"basapat",name:"Basapat",level:4,type:"tiyre"},{id:"konyrqazy",name:"Qo≈Ñƒ±rqazƒ±",level:4,type:"tiyre"},{id:"kenes",name:"Kenes",level:4,type:"tiyre"},{id:"tashkent",name:"Tashkent",level:4,type:"tiyre"}] },
                        { id: "sanmuryn", name: "SA≈ÉM√öRIN", level: 3, type: "urƒ±w", children: [{id:"konshi",name:"K√≥nshi",level:4,type:"tiyre"},{id:"tubai",name:"Tubay",level:4,type:"tiyre"},{id:"eshkili",name:"Eshkili",level:4,type:"tiyre"},{id:"zhaipaq-shek",name:"Jaypaq shek",level:4,type:"tiyre"},{id:"tolebai",name:"T√≥lebay",level:4,type:"tiyre"},{id:"zhabashy",name:"Jabashƒ±",level:4,type:"tiyre"}] },
                        { id: "estek", name: "ESTEK", level: 3, type: "urƒ±w", children: [{id:"manqanai",name:"Man'qanay",level:4,type:"tiyre"},{id:"qaiypnazar",name:"Qayƒ±pnazar",level:4,type:"tiyre"},{id:"karaterenshi",name:"Qaraterenshi",level:4,type:"tiyre"},{id:"qalmuart-es",name:"Qalmurat",level:4,type:"tiyre"}] },
                        { id: "qanzhygaly", name: "QANJƒ±ƒûALƒ±", level: 3, type: "urƒ±w", children: [{id:"shanyshpai",name:"Shanƒ±shpay",level:4,type:"tiyre"},{id:"sambet-q",name:"Sambet",level:4,type:"tiyre"},{id:"zhaghaltai",name:"Jag'altay",level:4,type:"tiyre"},{id:"baibishe-q",name:"B√°ybishe",level:4,type:"tiyre",children:[{id:"baibishe-q-kosh",name:"B√°ybishe",level:5,type:"ko'she"}]}] },
                        { id: "saltyr", name: "SALTIR", level: 3, type: "urƒ±w", children: [{id:"baibishe-s",name:"B√°ybishe",level:4,type:"tiyre"},{id:"sart",name:"Sart",level:4,type:"tiyre"},{id:"orazymbet-s",name:"Orazƒ±mbet",level:4,type:"tiyre"},{id:"shuyghan",name:"Shuylg'an",level:4,type:"tiyre"}] }
                    ]
                },
                {
                    id: "keneges", name: "KENEGES", level: 2, type: "√∫lken urƒ±w", tamga: "X", uran: "Shawlƒ±-Shawxay",
                    info: { history: "Ken'ges.", tamga: "X", uran: "Shawlƒ±-Shawxay", population: "1480 kibitka" },
                    children: [
                        { id: "aranshy", name: "ARANSHƒ±", level: 3, type: "urƒ±w", children: [{id:"annaqul",name:"Annaqul",level:4,type:"tiyre"},{id:"abas-k",name:"Abas",level:4,type:"tiyre",children:[{id:"seitimbet",name:"Seytimbet",level:5,type:"ko'she"}]},{id:"suiin",name:"S√∫yin",level:4,type:"tiyre"},{id:"zhuas",name:"Juwas",level:4,type:"tiyre"},{id:"dauletqargha",name:"D√°wletqarg'a",level:4,type:"tiyre"},{id:"qaipbergen",name:"Qayƒ±pbergen",level:4,type:"tiyre"}] },
                        { id: "aktogyn", name: "AQTOƒûIN", level: 3, type: "urƒ±w", children: [{id:"nanzhemes",name:"Nanjemes",level:4,type:"tiyre"},{id:"kosher",name:"K√≥sher",level:4,type:"tiyre"}] },
                        { id: "omir", name: "√ìMIR", level: 3, type: "urƒ±w", children: [{id:"aqpyshaq",name:"Aqpƒ±shaq",level:4,type:"tiyre"},{id:"usaq",name:"Usaq",level:4,type:"tiyre"},{id:"zhel",name:"Jel",level:4,type:"tiyre"},{id:"mynzhyr",name:"Mƒ±njƒ±r",level:4,type:"tiyre"},{id:"otemis-o",name:"√ìtemis",level:4,type:"tiyre"}] },
                        { id: "taraqly-ken", name: "TARAQLƒ±", level: 3, type: "urƒ±w", children: [{id:"zhetiqaraghaz",name:"Jetiqaraqazaqƒ±",level:4,type:"tiyre",children:[{id:"zheti-kosh",name:"Jetiqara",level:5,type:"ko'she"}]}] },
                        { id: "dobal", name: "DOBAL", level: 3, type: "urƒ±w" },
                        { id: "oymauyt", name: "OYMAWƒ±T", level: 3, type: "urƒ±w", children: [{id:"qara-o",name:"Qara",level:4,type:"tiyre"},{id:"sary-o",name:"Sarƒ±",level:4,type:"tiyre",children:[{id:"zhiydeli",name:"Jiydeli",level:5,type:"ko'she"}]},{id:"aq-o",name:"Aq",level:4,type:"tiyre"}] },
                        { id: "dombazqaq", name: "DOMBAZQAQ", level: 3, type: "urƒ±w" },
                        { id: "nokis", name: "N√ìKIS", level: 3, type: "urƒ±w", children: [{id:"zhamanzhak",name:"Jamanjaq",level:4,type:"tiyre"},{id:"bozaq",name:"Bozaq",level:4,type:"tiyre"},{id:"altynpyshaq",name:"Altƒ±npƒ±shaq",level:4,type:"tiyre"},{id:"ghobdir",name:"G'obdir",level:4,type:"tiyre"}] }
                    ]
                },
                {
                    id: "mangyt", name: "MA≈Éƒûƒ±T", level: 2, type: "√∫lken urƒ±w", tamga: "f", uran: "Shawlƒ±-Shawxay",
                    info: { history: "Sog'ƒ±sqor urƒ±w.", tamga: "f", uran: "Shawlƒ±-Shawxay", population: "2220 kibitka" },
                    children: [
                        { id: "qaratay", name: "QARATAY (Qara)", level: 3, type: "topar", children: [{id:"qaramangyt",name:"Qaraman'«µƒ±t",level:4,type:"tiyre",children:[{id:"ushbas",name:"√öshbas",level:5,type:"ko'she"},{id:"karasiraq-m",name:"Qarasƒ±yraq",level:5,type:"ko'she"},{id:"aqmangyt",name:"Aqman'«µƒ±t",level:5,type:"ko'she"}]},{id:"mamyqshy",name:"Mamƒ±qshƒ±",level:4,type:"urƒ±w",children:[{id:"zhetiqurt",name:"Jetiqurt",level:5,type:"ko'she"}]},{id:"kosar-m",name:"Qosar",level:4,type:"urƒ±w",children:[{id:"gubidin",name:"G'√∫bidin",level:5,type:"ko'she"}]},{id:"qylqaly",name:"Qƒ±lqalƒ±",level:4,type:"tiyre"}] },
                        { id: "sarytay", name: "SARITAY (Sarƒ±)", level: 3, type: "topar", children: [{id:"arshyn",name:"Arshƒ±n",level:4,type:"tiyre"},{id:"zhailyk",name:"Jaylƒ±q",level:4,type:"tiyre"},{id:"toqmangyt",name:"Toqman'«µƒ±t",level:4,type:"tiyre"},{id:"arsary",name:"Arsarƒ±",level:4,type:"tiyre"},{id:"tazhzhanlyk",name:"Tazjanlƒ±q",level:4,type:"tiyre"},{id:"shuyt",name:"Sh√∫yt",level:4,type:"tiyre"},{id:"zhamansha",name:"Jamansha",level:4,type:"tiyre"},{id:"esebii",name:"Esebiy",level:4,type:"tiyre"},{id:"tamgaly-m",name:"Tam«µalƒ±",level:4,type:"tiyre"},{id:"toqmoiyin",name:"Toqmoyƒ±n",level:4,type:"tiyre"},{id:"temirhoja",name:"Temirxoja",level:4,type:"tiyre"}] },
                        { id: "boztay", name: "BOZTAY (Boz)", level: 3, type: "topar", children: [{id:"bozta",name:"Bozta",level:4,type:"tiyre",children:[{id:"bozta-kosh",name:"Bozta",level:5,type:"ko'she"}]}] },
                        { id: "jetimtay", name: "JETIMTAY (Jetim)", level: 3, type: "topar", children: [{id:"eshbuga",name:"Eshbug'a",level:4,type:"tiyre",children:[{id:"eshbuga-kosh",name:"Eshbug'a",level:5,type:"ko'she"}]}] }
                    ]
                }
            ]
        }
    ]
};

// –ù–∞–π—Ç–∏ —É–∑–µ–ª –ø–æ ID –≤ –¥–µ—Ä–µ–≤–µ
function findNodeById(node, id) {
    if (node.id === id) return node;
    if (node.children) {
        for (let child of node.children) {
            const found = findNodeById(child, id);
            if (found) return found;
        }
    }
    return null;
}

// –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é —Ü–µ–ø–æ—á–∫—É —Ä–æ–¥–∏—Ç–µ–ª–µ–π –¥–æ –∫–æ—Ä–Ω—è
function getParentChain(node, current = treeData, chain = []) {
    if (current.id === node.id) {
        return [current, ...chain];
    }
    if (current.children) {
        for (let child of current.children) {
            const result = getParentChain(node, child, [current, ...chain]);
            if (result) return result;
        }
    }
    return null;
}

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤ —É–∑–ª–∞
function getAllDescendants(node) {
    const descendants = [];
    if (node.children) {
        for (let child of node.children) {
            descendants.push(child);
            descendants.push(...getAllDescendants(child));
        }
    }
    return descendants;
}

// –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –¥–µ—Ä–µ–≤–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–º–∫–æ–≤ –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—è–º
function buildDescendantsTree(node) {
    if (!node.children || node.children.length === 0) return null;
    
    const result = [];
    for (let child of node.children) {
        const item = {
            node: child,
            children: child.children || []
        };
        result.push(item);
    }
    return result;
}

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–Ω–µ–ª—å—é
function openPanel() {
    const panel = document.getElementById('infoPanel');
    const openBtn = document.getElementById('openPanelBtn');
    const statsBox = document.getElementById('statsBox');
    
    panel.classList.remove('collapsed');
    panel.classList.add('active');
    openBtn.classList.remove('visible');
    isPanelOpen = true;
    
    // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ —Å–¥–≤–∏–≥–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    if (window.innerWidth > 968) {
        statsBox.style.right = '470px';
    }
}

function closePanel() {
    const panel = document.getElementById('infoPanel');
    const openBtn = document.getElementById('openPanelBtn');
    const statsBox = document.getElementById('statsBox');
    
    panel.classList.add('collapsed');
    panel.classList.remove('active');
    openBtn.classList.add('visible');
    isPanelOpen = false;
    
    // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    if (window.innerWidth > 968) {
        statsBox.style.right = '10px';
    }
}

function togglePanel() {
    if (isPanelOpen) {
        closePanel();
    } else {
        openPanel();
    }
}

// –ë—É—Ä–≥–µ—Ä –º–µ–Ω—é
function toggleBurgerMenu() {
    const burger = document.getElementById('burgerMenu');
    const viewSwitch = document.getElementById('viewSwitch');
    
    burger.classList.toggle('active');
    viewSwitch.classList.toggle('active');
}

function buildTree(node, container) {
    const branch = document.createElement('div');
    branch.className = 'branch';
    const nodeEl = document.createElement('div');
    nodeEl.className = 'node level-' + node.level;
    let htmlContent = '<div class="node-title">' + node.name + '</div>';
    if (node.type) htmlContent += '<div class="node-subtitle">' + node.type + '</div>';
    nodeEl.innerHTML = htmlContent;
    nodeEl.onclick = function() { showInfo(node); };
    nodeEl.id = 'node-' + node.id;
    branch.appendChild(nodeEl);
    if (node.children && node.children.length > 0) {
        const connector = document.createElement('div');
        connector.className = 'connector';
        branch.appendChild(connector);
        const children = document.createElement('div');
        children.className = 'children level-' + (node.level + 1);
        for (let i = 0; i < node.children.length; i++) {
            buildTree(node.children[i], children);
        }
        branch.appendChild(children);
    }
    container.appendChild(branch);
}

function showInfo(node) {
    currentSelectedNode = node;
    
    document.querySelectorAll('.node').forEach(n => n.classList.remove('active'));
    const currentNode = document.getElementById('node-' + node.id);
    if (currentNode) currentNode.classList.add('active');
    
    const panel = document.getElementById('infoPanel');
    const content = document.getElementById('infoContent');
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
    openPanel();
    
    let html = '<div class="info-header"><div class="info-title">' + node.name + '</div><div class="info-type">' + (node.type || 'Uriw') + '</div></div>';
    
    // –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Ü–µ–ø–æ—á–∫–∞
    const chain = getParentChain(node);
    if (chain && chain.length > 0) {
        html += '<div class="info-section"><h3>üîó Tolƒ±q shejire</h3><div class="hierarchy-chain">';
        chain.reverse().forEach((item, index) => {
            const isLast = index === chain.length - 1;
            html += '<div class="hierarchy-item ' + (isLast ? 'current' : '') + '">';
            html += '<span class="hierarchy-level">' + levelsMap[item.level] + '</span>';
            html += '<span>' + item.name + '</span>';
            if (!isLast) html += '<span class="hierarchy-arrow">‚¨á</span>';
            html += '</div>';
        });
        html += '</div></div>';
    }
    
    const tamga = node.tamga || (node.info && node.info.tamga);
    if (tamga) {
        html += '<div class="tamga-box"><div class="tamga-symbol">' + tamga + '</div><div class="tamga-label">TAMƒûA (Uriw belgisi)</div></div>';
    }
    // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ uran (—Å —É—á—ë—Ç–æ–º –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è)
const uran = node.uran || (node.info && node.info.uran);

// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–µ –ø—É—Å—Ç–æ–µ
if (uran && String(uran).trim() !== '') {
    html += `
        <div class="uran-box">
            <div class="uran-text">${uran}</div>
            <div class="uran-label">URAN (Soƒü'ƒ±s uranƒ±)</div>
        </div>
    `;
}
    if (node.info) {
    const fields = [
        { key: 'history',     icon: 'üìú', title: 'Tariyx' },
        { key: 'origin',      icon: 'üß¨', title: 'Kelip shƒ±g\'ƒ±wƒ±' },
        { key: 'legend',      icon: 'üåü', title: 'A≈Ñƒ±z' },
        { key: 'population',  icon: 'üë•', title: 'Sanƒ±' },
        { key: 'structure',   icon: 'üèóÔ∏è', title: 'Qurilƒ±mƒ±' },
        { key: 'region',      icon: 'üåç', title: 'Jeri' },
        { key: 'language',    icon: 'üó£Ô∏è', title: 'Til' }
        // 'warrior' —É–±—Ä–∞–Ω–æ, —Ç.–∫. —Ç–∞–∫–æ–≥–æ –ø–æ–ª—è –≤ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç
        // –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—è–≤–∏—Ç—Å—è ‚Äî –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤–µ—Ä–Ω—É—Ç—å
    ];

    fields.forEach(field => {
        if (node.info[field.key]) {
            html += '<div class="info-section"><h3>' 
                + field.icon + ' ' + field.title 
            + '</h3><p>' + node.info[field.key] + '</p></div>';
        }
    });
}
    
    // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Ç–æ–º–∫–æ–≤
    if (node.children && node.children.length > 0) {
        const descendantsTree = buildDescendantsTree(node);
        html += '<div class="stats-box"><div class="stats-number">' + getAllDescendants(node).length + '</div><div> Barlƒ±q uriwdar</div></div>';
        
        html += '<div class="info-section"><h3>üëá T√≥men toparlar</h3>';
        html += '<div class="descendants-list">';
        
        descendantsTree.forEach(group => {
            html += '<div class="descendant-group">';
            html += '<div class="descendant-parent">';
            html += '<span style="color: var(--accent-yellow);">' + group.node.name + '</span>';
            html += ' <span style="font-size: 0.8em; opacity: 0.7;">(' + levelsMap[group.node.level] + ')</span>';
            html += '</div>';
            
            if (group.children.length > 0) {
                html += '<div class="descendant-children">';
                group.children.forEach(child => {
                    html += '<div class="descendant-child">';
                    html += '<span class="descendant-bullet"></span>';
                    html += '<span>' + child.name + '</span>';
                    if (child.children && child.children.length > 0) {
                        html += ' <span style="font-size: 0.75em; color: var(--accent-orange);">+' + getAllDescendants(child).length + '</span>';
                    }
                    html += '</div>';
                });
                html += '</div>';
            }
            html += '</div>';
        });
        
        html += '</div></div>';
    }
    
    html += '<div class="info-section"><h3>üìä D√°reje</h3><p>' + levelsMap[node.level] + ' (' + node.level + ')</p></div>';
    
    content.innerHTML = html;
}

function searchNode() {
    const input = document.getElementById('searchInput').value.toLowerCase();
    const nodes = document.querySelectorAll('.node');
    nodes.forEach(node => {
        if (node.textContent.toLowerCase().includes(input) && input.length > 0) {
            node.classList.add('highlight');
            node.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
            node.classList.remove('highlight');
        }
    });
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
document.addEventListener('DOMContentLoaded', function() {
    buildTree(treeData, document.getElementById('tree'));
    
    // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
    document.getElementById('closePanelBtn').addEventListener('click', closePanel);
    
    // –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
    document.getElementById('openPanelBtn').addEventListener('click', function() {
        if (currentSelectedNode) {
            openPanel();
        } else {
            // –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            alert(' Aldƒ±n\' menen tuwdƒ± tan\'lan\' ');
        }
    });
    
    // –ë—É—Ä–≥–µ—Ä –º–µ–Ω—é
    document.getElementById('burgerMenu').addEventListener('click', toggleBurgerMenu);
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –±—É—Ä–≥–µ—Ä –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
    document.querySelectorAll('.view-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                toggleBurgerMenu();
            }
        });
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
    window.addEventListener('resize', function() {
        if (window.innerWidth > 968) {
            // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏, –µ—Å–ª–∏ –æ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∞
            if (!isPanelOpen) {
                document.getElementById('openPanelBtn').classList.add('visible');
            }
        } else {
            // –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
            document.getElementById('openPanelBtn').classList.remove('visible');
        }
    });
});
    </script>



<!-- –ì–ª–æ—Å—Å–∞—Ä–∏–π -->
<div class="info-section" style="margin-top: 40px;">
    <h3 style="color: var(--accent-yellow); margin-bottom: 20px;">üìö Glosariy</h3>
    
    <div class="glossary-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
        
        <div class="rule-card">
            <h4>Arƒ±s</h4>
            <p>Ullƒ± urƒ±wlƒ±q birlespe (plemya). Qaraqalpaqtlarda eki tiykar«µƒ± arƒ±s bar: Qo≈Ñƒ±rat h√°m On t√≥rt ruu.</p>
        </div>
        
        <div class="rule-card">
            <h4>B√≥lim</h4>
            <p>Arƒ±stƒ±≈Ñ ishindegi √∫lken top. Mƒ±salƒ±, Shulƒ±q h√°m Jauƒ±≈Ñ«µƒ±r ‚Äî Qo≈Ñƒ±rat arƒ±sƒ±nƒ±≈Ñ b√≥limleri.</p>
        </div>
        
        <div class="rule-card">
            <h4>√ölken urƒ±w</h4>
            <p>B√≥limdi≈Ñ ishindegi birneshe urƒ±wdƒ± birlestiriwshi top. Mƒ±sallar: Qƒ±yat, Ashamaylƒ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Uruw</h4>
            <p>Tiykar«µƒ± tuwƒ±slƒ±q birlik. Ortaq atadan taraqan adamlar tobƒ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Tiyre</h4>
            <p>Uruwdƒ±≈Ñ ishindegi kishi bolinis. √Ådetle urƒ±wdƒ±≈Ñ belgili bir buta«µƒ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>K√≥she</h4>
            <p>E≈Ñ kishi tuwƒ±slƒ±q birlik. Tiyreni≈Ñ ishindegi top yamasa √≥yler tobƒ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Tamga</h4>
            <p>Uruwlƒ±q belgi, m√≥r. √Ådetle janƒ±warlar yamasa jatlar beynesinde boladƒ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Uran</h4>
            <p>Soyƒ±s urawƒ±, urƒ±wdƒ±≈Ñ shapqƒ±nshƒ±lƒ±q waqtƒ±ndagƒ± ayqayƒ±. Uruwdƒ± birlestiriwshi belgi.</p>
        </div>
        
        <div class="rule-card">
            <h4>Ekzogamiya</h4>
            <p>√ìz urƒ±wanan tƒ±s nekelew erejesi. Qaraqalpaq d√°st√∫rinde qataq saqtaladƒ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Qarƒ±msaq</h4>
            <p>Uruw ishindegi neke, incest. Qaraqalpaq qogamƒ±nda qataq tiyƒ±m salƒ±n«µan.</p>
        </div>
        
        <div class="rule-card">
            <h4>Shejire</h4>
            <p>Uruwlƒ±q tegi, ata-babalardƒ±≈Ñ tizimi. Awƒ±zsha da, jazbasha da jetkiziledi.</p>
        </div>
        
        <div class="rule-card">
            <h4>Qasiyet</h4>
            <p>Qaraqalpaq √°detlik quqƒ±«µƒ±, d√°st√∫rli normalar j√∫yesi.</p>
        </div>
    </div>
</div>

<!-- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞ -->
<div class="info-section" style="margin-top: 40px;">
    <h3 style="color: var(--accent-yellow); margin-bottom: 20px;">üìñ Paydalanƒ±l«µan derekler</h3>
    
    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px;">
        <h4 style="color: var(--accent-cyan); margin-bottom: 15px;">Tiykar«µƒ± √°debiyatlar</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8; color: var(--text-secondary);">
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Aqƒ±nov «¥. <em>Qaraqalpaq etnografiyasƒ±</em>. ‚Äî N√≥kis: Bilim, 1995.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Jolƒ±mbetov √Å. <em>Qaraqalpaq shejiresi</em>. ‚Äî N√≥kis: Qaraqalpaqstan, 2003.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Muratov S. <em>Qo≈Ñƒ±rat arƒ±sƒ±</em>. ‚Äî Tashkent: Fan, 1982.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Tilewmuratova R. <em>Qaraqalpaq urƒ±wlƒ±q qurƒ±lƒ±mƒ±</em>. ‚Äî N√≥kis: 2010.
            </li>
        </ul>
        
        <h4 style="color: var(--accent-cyan); margin: 20px 0 15px 0;">Arxivlik derekler</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8; color: var(--text-secondary);">
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Orƒ±nbar qazaq dalasƒ± j√≥nindegi jarlƒ±qlar jƒ±ma«µƒ± (1844-1868)
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                T√∫rkistan √≥lkelƒ±q statistikalƒ±q komiteti ma«µlƒ±wmatlarƒ± (1887-1917)
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Qaraqalpaq ASSR xalƒ±q sharuwashƒ±lƒ±ƒüƒ± esebi (1926-1939)
            </li>
        </ul>
        
        <h4 style="color: var(--accent-cyan); margin: 20px 0 15px 0;">Izertlew jumƒ±slarƒ±</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8; color: var(--text-secondary);">
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Basilov V.N. <em>Kult svyatyh v islame</em>. ‚Äî M.: 1970.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Troytskaya A.L. <em>K voprosu o rodo-plemennom sostave karakalpakow</em> // SE. ‚Äî 1937. ‚Äî ‚Ññ4.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">‚Ä¢</span>
                Jdanko T.A. <em>Karakalpakskie rodo-plemennye traditsii</em>. ‚Äî M.: 1950.
            </li>
        </ul>
        
        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border-color); font-size: 0.9em; color: var(--text-secondary);">
            <p><strong>Eskertpe:</strong> Bul joba akademiyalƒ±q h√°m m√°deniy-agartƒ±w maqsatƒ±nda jasal«µan. Uruwlƒ±q tegdi naqtƒ± anƒ±qlaw ushƒ±n arnawlƒ± shejireshi-genealoglarga j√∫giniw usƒ±nƒ±s etiledi.</p>
        </div>
    </div>
</div>
</body>
</html>
