<!DOCTYPE html>
<html lang="kaa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qaraqalpaq urÄ±wlarÄ± - TolÄ±q shejire</title>
    <style>
        :root {
            --primary-bg: #0f1419;
            --secondary-bg: #1a1f2e;
            --accent-red: #e74c3c;
            --accent-orange: #e67e22;
            --accent-yellow: #f1c40f;
            --gold: #f1c40f;
            --accent-green: #2ecc71;
            --accent-blue: #3498db;
            --accent-purple: #9b59b6;
            --accent-cyan: #1abc9c;
            --text-primary: #ecf0f1;
            --text-secondary: #bdc3c7;
            --border-color: #34495e;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            padding-top: 80px;
        }

        /* HEADER STYLES */
        header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: rgba(10,12,16,0.95);
            border-bottom: 2px solid var(--gold);
            padding: 1rem 2rem;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            height: 70px;
        }

        .logo { 
            display: flex; 
            align-items: center; 
            gap: 10px;
        }
        
        .logo a { 
            font-family: 'Cormorant Garamond', serif; 
            color: var(--gold); 
            font-size: 1.8rem; 
            margin: 0;
            text-decoration: none;
        }
        
        /* Ğ‘ÑƒÑ€Ğ³ĞµÑ€ Ğ¼ĞµĞ½Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° */
        .burger-menu {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            z-index: 1001;
        }
        
        .burger-bar {
            width: 100%;
            height: 3px;
            background: var(--gold);
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .burger-menu.active .burger-bar:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .burger-menu.active .burger-bar:nth-child(2) {
            opacity: 0;
        }
        
        .burger-menu.active .burger-bar:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }
        
        .view-switch {
            display: flex;
            gap: 0.5rem;
            background: rgba(255,255,255,0.1);
            padding: 0.25rem;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        /* ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ */
        @media (max-width: 968px) {
            .burger-menu {
                display: flex;
            }
            
            .view-switch {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                background: rgba(10,12,16,0.98);
                flex-direction: column;
                padding: 1rem;
                border-bottom: 2px solid var(--gold);
                border-radius: 0;
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
            }
            
            .view-switch.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }
            
            .view-btn {
                width: 100%;
                text-align: center;
                padding: 1rem;
            }
        }
        
        .view-btn {
            padding: 0.5rem 1.5rem;
            border-radius: 16px;
            border: none;
            background: transparent;
            color: #8892b0;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 0.9rem;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .view-btn:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.1);
        }
        
        .view-btn.active {
            background: var(--gold);
            color: #000;
            font-weight: 600;
            max-width: 170px;
            text-align: center;
            margin: 0 auto;
        }

        .container { 
            display: flex; 
            height: calc(100vh - 80px);
            overflow: hidden; 
            position: relative;
        }
        
        .tree-panel { 
            flex: 1; 
            overflow-y: auto; 
            padding: 15px; 
            background: rgba(15, 20, 25, 0.98); 
            transition: width 0.3s ease;
        }
        
        /* ĞŸÑ€Ğ°Ğ²Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ñ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒÑ ÑĞ²Ğ¾Ñ€Ğ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ */
        .info-panel {
            width: 450px; 
            background: var(--secondary-bg); 
            border-left: 3px solid var(--accent-orange);
            padding: 20px; 
            overflow-y: auto; 
            box-shadow: -5px 0 25px rgba(0,0,0,0.4);
            position: relative;
            transition: transform 0.3s ease, width 0.3s ease;
            transform: translateX(0);
        }
        
        /* Ğ¡ĞºÑ€Ñ‹Ñ‚Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ½Ğ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ */
        .info-panel.collapsed {
            transform: translateX(100%);
            width: 0;
            padding: 0;
            overflow: hidden;
            border-left: none;
        }
        
        /* ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ */
        .close-panel-btn {
            position: sticky;
            top: 10px;
            left: 400px;
            background: var(--accent-red);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s;
        }
        
        .close-panel-btn:hover {
            background: #c0392b;
            transform: scale(1.1);
        }
        
        /* ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ (Ğ¿Ğ»Ğ°Ğ²Ğ°ÑÑ‰Ğ°Ñ) */
        .open-panel-btn {
            position: fixed;
            right: 20px;
            bottom: 100px;
            background: var(--gold);
            color: #000;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5em;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(241, 196, 15, 0.4);
            transition: all 0.3s;
        }
        
        .open-panel-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(241, 196, 15, 0.6);
        }
        
        .open-panel-btn.visible {
            display: flex;
        }
        
        h1 { text-align: center; color: var(--accent-yellow); margin-bottom: 5px; font-size: 1.8em; }
        .subtitle { text-align: center; color: var(--text-secondary); margin-bottom: 15px; font-size: 0.8em; }
        .tree { display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .branch { display: flex; flex-direction: column; align-items: center; margin: 3px; }
        .node {
            background: var(--secondary-bg); border: 2px solid var(--border-color); border-radius: 6px;
            padding: 6px 10px; cursor: pointer; transition: all 0.3s;
            min-width: 80px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.2); font-size: 0.8em;
        }
        .node:hover { transform: translateY(-2px); border-color: var(--accent-yellow); }
        .node.active { border-color: var(--accent-yellow); box-shadow: 0 0 10px rgba(241, 196, 15, 0.4); }
        .level-0 .node { background: linear-gradient(135deg, #e74c3c, #c0392b); font-size: 1.1em; font-weight: bold; padding: 10px 18px; }
        .level-1 .node { background: linear-gradient(135deg, #e67e22, #d35400); font-size: 0.95em; font-weight: bold; }
        .level-2 .node { background: linear-gradient(135deg, #f1c40f, #f39c12); color: #2c3e50; font-weight: bold; }
        .level-3 .node { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .level-4 .node { background: linear-gradient(135deg, #3498db, #2980b9); font-size: 0.75em; }
        .level-5 .node { background: linear-gradient(135deg, #9b59b6, #8e44ad); font-size: 0.7em; min-width: 70px; }
        .level-6 .node { background: linear-gradient(135deg, #1abc9c, #16a085); font-size: 0.65em; min-width: 60px; }
        .node-title { font-weight: bold; font-size: 0.9em; }
        .node-subtitle { font-size: 0.7em; opacity: 0.9; }
        .connector { width: 2px; height: 12px; background: var(--accent-orange); margin: -2px auto; }
        .children { display: flex; gap: 4px; margin-top: 10px; flex-wrap: wrap; justify-content: center; }
        .info-header { border-bottom: 2px solid var(--accent-orange); padding-bottom: 10px; margin-bottom: 12px; }
        .info-title { font-size: 1.4em; color: var(--accent-yellow); margin-bottom: 5px; }
        .info-type { color: var(--accent-orange); font-size: 0.9em; text-transform: uppercase; letter-spacing: 1px; }
        .info-section { margin-bottom: 12px; background: rgba(255,255,255,0.03); padding: 12px; border-radius: 5px; border-left: 3px solid var(--accent-blue); }
        .info-section h3 { color: var(--accent-cyan); margin-bottom: 8px; font-size: 0.9em; display: flex; align-items: center; gap: 8px; }
        .info-section p { color: var(--text-secondary); line-height: 1.5; font-size: 0.9em; text-align: justify; }
        .tamga-box { background: rgba(231, 76, 60, 0.15); border: 2px solid var(--accent-red); border-radius: 8px; padding: 15px; text-align: center; margin: 12px 0; }
        .tamga-symbol { font-size: 2em; color: var(--accent-yellow); font-weight: bold; margin-bottom: 5px; }
        .tamga-label { font-size: 0.8em; color: var(--text-secondary); text-transform: uppercase; }
        .uran-box { background: rgba(46, 204, 113, 0.15); border: 2px solid var(--accent-green); border-radius: 8px; padding: 15px; text-align: center; margin: 12px 0; }
        .uran-text { font-size: 1.4em; color: var(--accent-green); font-weight: bold; font-style: italic; margin-bottom: 5px; }
        .uran-label { font-size: 0.8em; color: var(--text-secondary); text-transform: uppercase; }
        .stats-box { background: rgba(52, 152, 219, 0.1); border: 1px solid var(--accent-blue); border-radius: 6px; padding: 10px; margin: 10px 0; text-align: center; }
        .stats-number { font-size: 1.3em; color: var(--accent-yellow); font-weight: bold; }
        /* .legend { position: fixed; bottom: 10px; left: 10px; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 6px; font-size: 0.75em; z-index: 100; } */
        .legend { 
    position: sticky; 
    bottom: 10px; 
    left: 10px; 
    background: rgba(0,0,0,0.9); 
    padding: 10px; 
    border-radius: 6px; 
    font-size: 0.75em; 
    z-index: 100; 
    align-self: flex-start;
    width: fit-content;
    margin-top: auto;
}
        .legend-item { display: flex; align-items: center; gap: 5px; margin: 2px 0; }
        .legend-color { width: 12px; height: 12px; border-radius: 2px; }
        .stats { position: fixed; top: 90px; right: 475px; background: rgba(0,0,0,0.9); padding: 10px; border-radius: 6px; font-size: 0.8em; z-index: 100; transition: right 0.3s ease; }
        
        /* ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ğ½ÑˆĞµÑ‚Ğ¾Ğ² */
        @media (max-width: 1024px) {
            .stats { right: 10px; top: 90px; }
        }
        
        /* ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… */
        @media (max-width: 968px) { 
            .stats { 
                right: 10px; 
                top: 80px; 
                font-size: 0.65em;
                max-width: 150px;
            } 

            .legend {
                display: none;
            }
            
            
            .info-panel { 
                width: 100%; 
                position: fixed; 
                bottom: 0; 
                left: 0; 
                height: 60vh; 
                transform: translateY(100%); 
                transition: transform 0.3s ease;
                z-index: 1000;
                border-left: none;
                border-top: 3px solid var(--accent-orange);
            } 
            
            .info-panel.active { 
                transform: translateY(0); 
            }
            
            .info-panel.collapsed {
                transform: translateY(100%);
            }
            
            header { 
                padding: 0.5rem 1rem; 
            }
            
            body { padding-top: 70px; }
            .container { height: calc(100vh - 70px); }
            
            .open-panel-btn {
                bottom: 20px;
                right: 20px;
            }
            .search-box input {
                position: absolute;
                top: 47px;
            }
        }

        @media (max-width: 765px) {
            .stats { display: none; }
        }
        
        .search-box { position: fixed; top: 72px; left: 10px; z-index: 100; }
        .search-box input { padding: 6px 10px; border-radius: 15px; border: 1px solid var(--accent-blue); background: rgba(0,0,0,0.9); color: white; width: 180px; font-size: 0.85em; }
        .highlight { 
            animation: pulse 1.5s infinite;
            border-color: var(--accent-yellow) !important;
            border: solid 5px var(--accent-yellow) !important;
        }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7); } 70% { box-shadow: 0 0 0 12px rgba(241, 196, 15, 0); } 100% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0); } }
        
        /* Hierarchy styles */
        .hierarchy-chain {
            background: linear-gradient(135deg, rgba(241, 196, 15, 0.1), rgba(230, 126, 34, 0.1));
            border: 2px solid var(--accent-yellow);
            border-radius: 8px;
            padding: 15px;
            margin: 12px 0;
        }
        .hierarchy-item {
            display: flex;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px dashed rgba(241, 196, 15, 0.3);
        }
        .hierarchy-item:last-child {
            border-bottom: none;
            font-weight: bold;
            color: var(--accent-yellow);
        }
        .hierarchy-arrow {
            margin: 0 10px;
            color: var(--accent-orange);
        }
        .hierarchy-level {
            background: var(--accent-yellow);
            color: #000;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.7em;
            margin-right: 8px;
            min-width: 60px;
            text-align: center;
        }
        .descendants-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .descendant-group {
            margin-bottom: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 5px;
            padding: 8px;
        }
        .descendant-parent {
            font-weight: bold;
            color: var(--accent-cyan);
            margin-bottom: 5px;
            font-size: 0.85em;
        }
        .descendant-children {
            padding-left: 15px;
            font-size: 0.8em;
            color: var(--text-secondary);
        }
        .descendant-child {
            padding: 2px 0;
            display: flex;
            align-items: center;
        }
        .descendant-bullet {
            width: 6px;
            height: 6px;
            background: var(--accent-green);
            border-radius: 50%;
            margin-right: 8px;
        }

        .lang-switch {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: 1rem;
    padding-left: 1rem;
    border-left: 1px solid rgba(212,175,55,0.3);
}

.lang-btn {
    /* padding: 0.1rem 0.1rem; */
    border-radius: 10px;
    border: 1px solid var(--gold);
    background: transparent;
    color: var(--gold);
    cursor: pointer;
    font-size: 0.65rem;
    font-weight: 400;
    transition: all 0.3s;
    text-decoration: none;
}
.lang-btn1 {
    padding: 0.4rem 0.4rem;
    border-radius: 8px;
    background: transparent;
    color: var(--gold);
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.3s;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
}
.lang-btn img {
    width: 65px;
    height: 65px;
    margin-bottom: 4px;
    border-radius: 50%;
    vertical-align: middle;
}
.lang-btn1 img {
    width: 43px;
    height: 43px; 
    border-radius: 50%;
    vertical-align: middle;
}

.lang-btn:hover {
    background: rgba(212,175,55,0.1);
    border: 1px solid var(--gold);
}

.lang-btn.active {
    width: 53px;
    height: 53px;
    border: 1px solid var(--accent-orange);
    display: flex;
    align-items: center;
    justify-content: center;
}

.lang-btn1:hover {
    border: 1px solid var(--gold);
    width: 53px;
    height: 53px;

   
}
.lang-btn1.active {
    background: #000;
    color: #000;
}

        @media (max-width: 768px) {
    .lang-switch {
        margin-left: 0;
        padding-left: 0;
        border-left: none;
        border-top: 1px solid rgba(212,175,55,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
.lang-btn1:hover {
    border: 0px solid var(--gold);
    }
    }
    
    </style>
<base target="_blank">
</head>
<body>
    <header>
        <div class="logo">
            <span style="font-size: 2rem;">ğŸ </span>
            <a target="_blank" href="./images/uru.jpg">URIW</a>
        </div>
        
        <!-- Ğ‘ÑƒÑ€Ğ³ĞµÑ€ Ğ¼ĞµĞ½Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° -->
        <button class="burger-menu" id="burgerMenu" aria-label="MenÃºdi ashÄ±w">
            <span class="burger-bar"></span>
            <span class="burger-bar"></span>
            <span class="burger-bar"></span>
        </button>
        
        <div class="view-switch" id="viewSwitch">
            
            <a href="index.html" class="view-btn active" target="_self">ğŸ  Bas bet</a>
            <a href="listsQQ.html" class="view-btn" target="_self">ğŸ“‹ Tizimler</a>
            <a href="schemeQQ.html" class="view-btn" target="_self">ğŸŒ³ Sxema</a>
            <a href="exogamyQQ.html" class="view-btn" target="_self">ğŸ’‘ Ekzogamiya</a>
        </div>

        <div class="lang-switch">
    <a target="_self" href="index.html" class="lang-btn active"><img src="./images/QQ_.png" alt="QQ"></a>
    <a target="_self" href="indexKZ.html" class="lang-btn1"><img src="./images/KZ.webp" alt="KZ"></a>
</div>
    </header>


        <!-- Ğ‘ĞµĞ³ÑƒÑ‰Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ² -->
    <div class="mobile-warning-marquee" id="mobileMarquee">
        <div class="marquee-wrapper">
            <div class="marquee-content">
                <span>ğŸ“± Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi  ğŸ–¥ï¸ Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi | </span>
                <span>ğŸ“± Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi  ğŸ–¥ï¸ Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi | </span>
                <span>ğŸ“± Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi  ğŸ–¥ï¸ Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi | </span>
                <span>ğŸ“± Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi  ğŸ–¥ï¸ Bul betti Ãºlken ekranda qaraw usÄ±nÄ±s etiledi | </span>
            </div>
        </div>
    </div>

    <style>
        /* Ğ‘ĞµĞ³ÑƒÑ‰Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… */
        .mobile-warning-marquee {
            display: none;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, var(--accent-orange), var(--accent-red));
            color: white;
            padding: 8px 0;
            font-size: 0.9em;
            font-weight: 600;
            z-index: 999;
            overflow: hidden;
            white-space: nowrap;
            box-shadow: 0 2px 10px rgba(231, 76, 60, 0.4);
            border-bottom: 2px solid var(--gold);
        }

        .marquee-wrapper {
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .marquee-content {
            display: inline-flex;
            animation: marquee-scroll 20s linear infinite;
        }

        .marquee-content span {
            padding-right: 50px;
        }

        .marquee-content:hover {
            animation-play-state: paused;
        }

        @keyframes marquee-scroll {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-25%);
            }
        }

        /* ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğ°Ñ… Ğ¼ĞµĞ½ÑŒÑˆĞµ 967px */
        @media (max-width: 967px) {
            .mobile-warning-marquee {
                display: block;
            }
            
            body {
                padding-top: 115px !important;
            }

            
        }

        @media (max-width: 480px) {
            .marquee-content {
                animation-duration: 15s;
            }
            
            .mobile-warning-marquee {
                font-size: 0.8em;
                padding: 6px 0;
            }
        }
    </style>

    <div class="search-box"><input type="text" id="searchInput" placeholder="Izlew..." onkeyup="searchNode()"></div>
    <div class="stats" id="statsBox"><div><strong>Statistika:</strong></div><div>ArÄ±s: 2</div><div>BÃ³lim: 2</div><div>Uriw: 50+</div><div>tiyre/ko'she: 300+</div></div>
    
    <div class="container">
        <div class="tree-panel" id="treePanel">
            <h1 style="margin-top: 10px;">QARAQALPAQ URIWLARI</h1>
            <div class="subtitle"></div>
            <div class="tree" id="tree"></div>
        </div>
        <div class="info-panel" id="infoPanel">
            <button class="close-panel-btn" id="closePanelBtn" title="Paneldi jabÄ±w">Ã—</button>
            <div id="infoContent">
                <div class="info-header"><div class="info-title">Elementti taÅ„laÅ„</div><div class="info-type">TamÇµa, uran hÃ¡m tariyx haqqÄ±nda maÇµlÄ±wmat alÄ±w ushÄ±n basÄ±Å„</div></div>
            </div>
        </div>
    </div>
    
    <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ -->
    <button class="open-panel-btn" id="openPanelBtn" title="MaÇµlÄ±wmat panelin ashÄ±w">â„¹ï¸</button>
    
    <div class="legend">
        <div><strong>Ierarxiya:</strong></div>
        <div class="legend-item"><div class="legend-color" style="background: #e74c3c;"></div> XalÄ±q</div>
        <div class="legend-item"><div class="legend-color" style="background: #e67e22;"></div> ArÄ±s</div>
        <div class="legend-item"><div class="legend-color" style="background: #f1c40f;"></div> BÃ³lim/Ãšlken urÄ±w</div>
        <div class="legend-item"><div class="legend-color" style="background: #2ecc71;"></div> UrÄ±w</div>
        <div class="legend-item"><div class="legend-color" style="background: #3498db;"></div> Tiyre</div>
        <div class="legend-item"><div class="legend-color" style="background: #9b59b6;"></div> Ko'she</div>
        
    </div>

    <script>
const levelsMap = ['XalÄ±q / XalÄ±q', 'ArÄ±s', 'BÃ³lim', 'Ãšlken urÄ±w', 'Tiyre', 'Ko\'she'];

// Ğ¤Ğ»Ğ°Ğ³ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
let isPanelOpen = false;
let currentSelectedNode = null;

const treeData = {
    id: "root", name: "QARAQALPAQLAR", level: 0, type: "XalÄ±q",
    info: {
        history: "Qaraqalpaqlar - Orta Aziyadag'Ä± tÃºrki tilles xalÄ±q. XVI-XVIII Ã¡sirlerde qalÄ±ptastÄ±rÄ±lÇµan.",
        origin: "Negizinen NoÇµay ordasÄ±, QÄ±pchaq, Qarluq taypalarÄ±nan.",
        legend: "AÅ„Ä±zÇµa sÃ¡y, alÇµashqÄ± kÃ³shpendiler ÃšlÄ± taw Ã³Å„irinen Aral maÅ„Ä±na kÃ³ship kelgen.",
        tamga: "Ãr urÄ±wdÄ±Å„ Ã³z tamÇµasÄ±",
        uran: "Ãr urÄ±wdÄ±Å„ Ã³z uranÄ±",
        population: "800 mÄ±Å„ adam",
        language: "Qaraqalpaq tili - tÃºrki tilleriniÅ„ qÄ±pchaq tarmaÇµÄ±"
    },
    children: [
        {
            id: "conyrat", name: "ARYS QOÅƒIRAT", level: 1, type: "arÄ±s", tamga: "P (bosaÇµa)", uran: "Qaqpa",
            info: {
                history: "QoÅ„Ä±rat - eki Ãºlken arÄ±stÄ±Å„ biri. NoÇµay ordasÄ±nan.",
                origin: "NoÇµaylÄ±q, QÄ±pchaq taypalarÄ± qosÄ±ndÄ±sÄ±.",
                legend: "QoÅ„Ä±rat - 'qandÄ± qaraqalpaq' ma'nisinde.",
                tamga: "P Ã¡rpi - bosaÇµa (esik)",
                uran: "Qaqpa - qorÇµan",
                population: "9520 kibitka (40%)",
                structure: "ShulÄ±q (8 urÄ±w) hÃ¡m JawÄ±ngÄ±r (7 urÄ±w)"
            },
            children: [
                {
                    id: "shulyk", name: "SHULLIQ BÃ“LIMI", level: 2, type: "bÃ³lim",
                    info: { history: "ShulÄ±q - 8 urÄ±wdan turadÄ±.", origin: "ShulÄ±q jeriniÅ„ atawÄ±nan.", population: "5860 kibitka" },
                    children: [
                        {
                            id: "kyat", name: "QIYAT", level: 3, type: "Ãºlken urÄ±w",
                            info: { history: "QÄ±yat - ShulÄ±qtÄ±Å„ eÅ„ Ãºlken urÄ±wÄ±.", origin: "QÄ±yat batÄ±rdan.", legend: "Ãšsh ulÄ±: ÃšshtanbalÄ±, TaraqtÄ±, BalÇµalÄ±.", population: "870 kibitka", tamga: "Ãšsh taÅ„ba", uran: "Alataw" },
                            children: [
                                {
                                    id: "ush-tambaly", name: "ÃšshtanbalÄ±", level: 4, type: "tiyre",
                                    info: { history: "Ãšsh taÅ„balÄ± - Ãºsh belgisi.", tamga: "Ãšsh sÄ±zÄ±q", uran: "Alataw!", population: "350-400 otbasÄ±" },
                                    children: [
                                        { id: "sanmurun-k", name: "SaÅ„mÃºrin", level: 5, type: "ko'she", info: { tamga: "SM", uran: "Alataw!", history: "SaÅ„ mÃºrÄ±ndÄ±q maldan" } },
                                        { id: "aryq-kyat", name: "ArÄ±qqiyat", level: 5, type: "ko'she", info: { tamga: "AQ", uran: "Alataw!", history: "ArÄ±q deneli" } },
                                        { id: "tartuly", name: "TartulÄ±", level: 5, type: "ko'she", info: { tamga: "TR", uran: "Alataw!", history: "TartÄ±mdÄ±, qaysar" } },
                                        { id: "qanzhygaly-k", name: "QanjÄ±ÇµalÄ±", level: 5, type: "ko'she", info: { tamga: "QJ", uran: "Alataw!", history: "Jebe saplÄ±ÇµÄ±" } },
                                        { id: "qatagan", name: "QataÇµan", level: 5, type: "ko'she", info: { tamga: "QT", uran: "Alataw!", history: "SoltÃºstik Jetisuw" } },
                                        { id: "qara-kyat", name: "Qaraqiyat", level: 5, type: "ko'she", info: { tamga: "QQ", uran: "Alataw!", history: "QaraÅ„gÄ± tÃºsti" } }
                                    ]
                                },
                                {
                                    id: "taraqty", name: "TaraqtÄ±", level: 4, type: "tiyre",
                                    info: { history: "ShashaqtÄ±, Ã³rnekteli", tamga: "TB", uran: "Alataw!" },
                                    children: [
                                        { id: "togyzaq", name: "Tog'Ä±zaq", level: 5, type: "ko'she", info: { tamga: "T9", uran: "Tog'Ä±sqan!", history: "Tog'Ä±z Ãºrpaqtan keyin" } },
                                        { id: "abas-kyat", name: "Abas", level: 5, type: "ko'she", info: { tamga: "AB", uran: "Alataw!", history: "Abas batÄ±r" } },
                                        { id: "jaltyrshy", name: "JaltÄ±rshÄ±", level: 5, type: "ko'she", info: { tamga: "JL", uran: "Alataw!", history: "JarqÄ±n" } },
                                        { id: "aqunqaragan", name: "AqÃºnqarag'an", level: 5, type: "ko'she", info: { tamga: "AQQ", uran: "Alataw!", history: "Aq qÃºndÄ±qtÄ±" } },
                                        { id: "taqay", name: "Taqay", level: 5, type: "ko'she", info: { tamga: "TQ", uran: "Alataw!" } },
                                        { id: "qarzhaubaras", name: "Qarjawbaras", level: 5, type: "ko'she", info: { tamga: "QJB", uran: "Alataw!" } }
                                    ]
                                },
                                {
                                    id: "balgaly-kyat", name: "BalÇµalÄ± QÄ±yat", level: 4, type: "tiyre",
                                    info: { history: "BalÇµa ustag'an", tamga: "B", uran: "Alataw!", legend: "Temirshiler termini" },
                                    children: [
                                        { id: "bespishaq", name: "BespÄ±shaq", level: 5, type: "ko'she", info: { tamga: "B5", uran: "Alataw!", history: "Bes pÄ±shaq" } },
                                        { id: "etekshi", name: "Etekshi", level: 5, type: "ko'she", info: { tamga: "ET", uran: "Alataw!", history: "Etek - qoltÄ±rawÄ±n" } },
                                        { id: "sanmurun-bk", name: "SaÅ„mÃºrin", level: 5, type: "ko'she", info: { tamga: "SMB", uran: "Alataw!" } },
                                        { id: "qozhaqaragan", name: "Qojaqarag'an", level: 5, type: "ko'she", info: { tamga: "QJQ", uran: "Alataw!", history: "Qoja ata" } }
                                    ]
                                }
                            ]
                        },
                        {
                            id: "ashamayly", name: "ASHAMAYLÄ±", level: 3, type: "Ãºlken urÄ±w",
                            info: { history: "Ashamay - kÃ³ri Ğ½Ğ°ÑˆĞ°Ñ€ kÃ³rgen.", tamga: "ASH", uran: "ShulÄ±q!", population: "870 kibitka" },
                            children: [
                                { id: "saqu", name: "Saqu", level: 4, type: "tiyre", info: { tamga: "SQ", uran: "ShulÄ±q!", history: "SaqshÄ±lar" } },
                                { id: "qaraqoja", name: "Qaraqoza", level: 4, type: "tiyre", info: { tamga: "QQ", uran: "ShulÄ±q!", history: "Qara qoja" } },
                                { id: "jalangayaq", name: "JalaÅ„ayaq", level: 4, type: "tiyre", info: { tamga: "JA", uran: "ShulÄ±q!", history: "Tez jÃºgiriwshi" } },
                                { id: "ajyldy", name: "AyÄ±ldÄ±", level: 4, type: "tiyre", info: { tamga: "AY", uran: "ShulÄ±q!", history: "AyÄ±l - otar" } },
                                {
                                    id: "qobasan", name: "Qobasan", level: 4, type: "tiyre",
                                    info: { tamga: "QBS", uran: "ShulÄ±q!", history: "Qoba - quz" },
                                    children: [
                                        { id: "aqnazar", name: "Aqnazar", level: 5, type: "ko'she", info: { tamga: "AN", uran: "ShulÄ±q!" } },
                                        { id: "jansary", name: "JansarÄ±", level: 5, type: "ko'she", info: { tamga: "JS", uran: "ShulÄ±q!" } },
                                        { id: "otemis-q", name: "Ã“temis", level: 5, type: "ko'she", info: { tamga: "Ã“T", uran: "ShulÄ±q!" } },
                                        { id: "esen", name: "Esen", level: 5, type: "ko'she", info: { tamga: "ES", uran: "ShulÄ±q!" } },
                                        { id: "tampysh", name: "TampÄ±sh", level: 5, type: "ko'she", info: { tamga: "TM", uran: "ShulÄ±q!" } }
                                    ]
                                },
                                { id: "turkmenqara", name: "TÃºrkmenqara", level: 4, type: "tiyre", info: { tamga: "TQ", uran: "ShulÄ±q!", history: "TÃºrkmenler menen aralasqan" } },
                                { id: "jappar", name: "Jappar", level: 4, type: "tiyre", info: { tamga: "JP", uran: "ShulÄ±q!" } },
                                { id: "sary-ash", name: "SarÄ±", level: 4, type: "tiyre", info: { tamga: "SR", uran: "ShulÄ±q!" } },
                                { id: "abyz-ash", name: "AbÄ±z", level: 4, type: "tiyre", info: { tamga: "AB", uran: "ShulÄ±q!" } },
                                { id: "aqay", name: "Aqay", level: 4, type: "tiyre", info: { tamga: "AQ", uran: "ShulÄ±q!" } },
                                { id: "pangqara", name: "Pan'qara", level: 4, type: "tiyre", info: { tamga: "PN'", uran: "ShulÄ±q!" } },
                                {
                                    id: "ush-bas", name: "Ãšsh bas", level: 4, type: "tiyre",
                                    info: { tamga: "ÃšB", uran: "ShulÄ±q!", history: "Ãšsh bastÄ± toqÄ±g'an" },
                                    children: [{ id: "jaman-ub", name: "Jaman", level: 5, type: "ko'she", info: { tamga: "JM", uran: "ShulÄ±q!" } }]
                                },
                                { id: "qurama", name: "Qurama", level: 4, type: "tiyre", info: { tamga: "QR", uran: "ShulÄ±q!" } }
                            ]
                        },
                        {
                            id: "koldauli", name: "QOLDAWLÄ±", level: 3, type: "Ãºlken urÄ±w",
                            info: { history: "Qoldaw - opora.", tamga: "QLD", uran: "Qoldaw!", population: "1140 kibitka" },
                            children: [
                                { id: "beskempir", name: "Beskempir", level: 4, type: "tiyre", info: { tamga: "B5", uran: "Qoldaw!", history: "Bes kempir" } },
                                { id: "maishyshaly", name: "MayÅŸÄ±shalÄ±", level: 4, type: "tiyre", info: { tamga: "MSH", uran: "Qoldaw!", history: "MaylÄ± shÄ±sha" } },
                                { id: "qalqaman", name: "Qalqaman", level: 4, type: "tiyre", info: { tamga: "QLQ", uran: "Qoldaw!" } },
                                { id: "ghajypqaragan", name: "G'ayÄ±pqarag'an", level: 4, type: "tiyre", info: { tamga: "G'Q", uran: "Qoldaw!", history: "G'ayÄ±p bolg'an ata" } },
                                { id: "sarytan-k", name: "SarÄ±tan", level: 4, type: "tiyre", info: { tamga: "SRT", uran: "Qoldaw!" } },
                                { id: "kulkiqozhaq", name: "KÃºlkÃ­qojaq", level: 4, type: "tiyre", info: { tamga: "KQ", uran: "Qoldaw!" } },
                                { id: "jarymbet", name: "JarÄ±mbet", level: 4, type: "tiyre", info: { tamga: "JB", uran: "Qoldaw!" } },
                                { id: "qyzylayaq", name: "QÄ±zÄ±layaq", level: 4, type: "tiyre", info: { tamga: "QZ", uran: "Qoldaw!" } },
                                { id: "karasiraq-k", name: "Qarasiraq", level: 4, type: "tiyre", info: { tamga: "QSR", uran: "Qoldaw!" } },
                                { id: "jelqaragan", name: "Jelqarag'an", level: 4, type: "tiyre", info: { tamga: "JQ", uran: "Qoldaw!" } },
                                { id: "ulkenborik", name: "ÃšlkenbÃ³rik", level: 4, type: "tiyre", info: { tamga: "ÃšB", uran: "Qoldaw!" } },
                                { id: "shylzhuyt", name: "ShÄ±ljuyt", level: 4, type: "tiyre", info: { tamga: "SHJ", uran: "Qoldaw!" } },
                                { id: "jamanqonyrat", name: "JamanqoÅ„Ä±rat", level: 4, type: "tiyre", info: { tamga: "JQ", uran: "Qoldaw!" } },
                                {
                                    id: "kalmaq", name: "Qalmaq", level: 4, type: "tiyre",
                                    info: { tamga: "QM", uran: "Qoldaw!", history: "Qalmaqlar menen aralasqan" },
                                    children: [
                                        { id: "adil", name: "Ãdil", level: 5, type: "ko'she", info: { tamga: "ÃD", uran: "Qoldaw!" } },
                                        { id: "ereke", name: "Ereke", level: 5, type: "ko'she", info: { tamga: "ER", uran: "Qoldaw!" } }
                                    ]
                                },
                                { id: "jaman-aul", name: "Jaman awÄ±l", level: 4, type: "tiyre", info: { tamga: "JA", uran: "Qoldaw!" } }
                            ]
                        },
                        {
                            id: "kostambali", name: "QOSTAÅƒBALÄ±", level: 3, type: "Ãºlken urÄ±w", tamga: "II",
                            info: { history: "Eki tamÇµalÄ±.", tamga: "II", uran: "Qosqa!", population: "590 kibitka" },
                            children: [
                                { id: "jangildi-k", name: "Jangildi", level: 4, type: "tiyre", info: { tamga: "JG", uran: "Qosqa!" } },
                                { id: "shirzhegen", name: "Shirjegen", level: 4, type: "tiyre", info: { tamga: "SHJ", uran: "Qosqa!" } },
                                { id: "aghabegli", name: "AÇµabegli", level: 4, type: "tiyre", info: { tamga: "AB", uran: "Qosqa!" } },
                                { id: "qarynzhuan", name: "QarÄ±njwan", level: 4, type: "tiyre", info: { tamga: "QJ", uran: "Qosqa!" } },
                                { id: "kostambali-k", name: "QostanbalÄ±", level: 4, type: "tiyre", info: { tamga: "QT", uran: "Qosqa!" } },
                                { id: "qaraqursaq-k", name: "QaraqÃºrsaq", level: 4, type: "tiyre", info: { tamga: "QQ", uran: "Qosqa!" } },
                                { id: "qazaqy-k", name: "QazaqÄ±", level: 4, type: "tiyre", info: { tamga: "QZ", uran: "Qosqa!" } }
                            ]
                        },
                        {
                            id: "balgali", name: "BALÄALÄ±", level: 3, type: "Ãºlken urÄ±w",
                            info: { history: "BalÇµa ustag'an. Temirshiler.", tamga: "B", uran: "BalÇµa!", legend: "Temirshiler ÃºrpaÇµÄ±", population: "560 kibitka" },
                            children: [
                                { id: "aqbalgali", name: "AqbalÇµalÄ±", level: 4, type: "tiyre", info: { tamga: "AB", uran: "BalÇµa!" } },
                                { id: "nurbalgali", name: "NÃºrbalÇµalÄ±", level: 4, type: "tiyre", info: { tamga: "NB", uran: "BalÇµa!" } },
                                { id: "turkmen-b", name: "TÃºrkmen", level: 4, type: "tiyre", info: { tamga: "TB", uran: "BalÇµa!" } },
                                { id: "jamanaul-b", name: "Jamanaul", level: 4, type: "tiyre", info: { tamga: "JA", uran: "BalÇµa!" } },
                                { id: "shomishti", name: "ShÃ³mishti", level: 4, type: "tiyre", info: { tamga: "SHM", uran: "BalÇµa!" } },
                                { id: "toqymbet", name: "ToqÄ±mbet", level: 4, type: "tiyre", info: { tamga: "TQ", uran: "BalÇµa!" } },
                                { id: "tazbalgali", name: "TazbalÇµalÄ±", level: 4, type: "tiyre", info: { tamga: "TB", uran: "BalÇµa!" } },
                                { id: "kostamgali-b", name: "QostamÇµalÄ±", level: 4, type: "tiyre", info: { tamga: "QS", uran: "BalÇµa!" } },
                                { id: "qaratalshy", name: "QaratalshÄ±", level: 4, type: "tiyre", info: { tamga: "QT", uran: "BalÇµa!" } },
                                { id: "asan", name: "Asan", level: 4, type: "tiyre", info: { tamga: "AS", uran: "BalÇµa!" } },
                                { id: "arzyqul", name: "ArzÄ±qul", level: 4, type: "tiyre", info: { tamga: "AR", uran: "BalÇµa!" } }
                            ]
                        },
                        {
                            id: "kandekli", name: "QÃNDEKLI", level: 3, type: "Ãºlken urÄ±w", tamga: "G",
                            info: { history: "KÃ³ndek - qora.", tamga: "G", uran: "KÃ³ndek!", population: "730 kibitka" },
                            children: [
                                { id: "qarama-kan", name: "Qarama", level: 4, type: "tiyre", info: { tamga: "QR", uran: "KÃ³ndek!" } },
                                { id: "kiikshi", name: "Kiikshi", level: 4, type: "tiyre", info: { tamga: "KSH", uran: "KÃ³ndek!", history: "Kiik saqshÄ±" } },
                                { id: "toqbolat-kan", name: "Toqbolat", level: 4, type: "tiyre", info: { tamga: "TB", uran: "KÃ³ndek!" } },
                                { id: "qyryqsadaq", name: "QÄ±rÄ±qsadaq", level: 4, type: "tiyre", info: { tamga: "QS", uran: "KÃ³ndek!", history: "40 sadaq" } }
                            ]
                        },
                        {
                            id: "karamoiyn", name: "QARAMOYÄ±N", level: 3, type: "Ãºlken urÄ±w", tamga: "TM",
                            info: { history: "Qara moyÄ±n.", tamga: "TM", uran: "MoyÄ±n!", population: "560 kibitka" },
                            children: [
                                { id: "annakhoja", name: "Annaxoza", level: 4, type: "tiyre", info: { tamga: "AN", uran: "MoyÄ±n!", history: "Anna Ã¡wliye" } },
                                { id: "sabalaq", name: "Sabalaq", level: 4, type: "tiyre", info: { tamga: "SB", uran: "MoyÄ±n!", history: "Saba - bala" } },
                                { id: "kotelek", name: "KÃ³telek", level: 4, type: "tiyre", info: { tamga: "KT", uran: "MoyÄ±n!", history: "Torlaw" } },
                                { id: "qarlymaral", name: "QarlÄ±maral", level: 4, type: "tiyre", info: { tamga: "QM", uran: "MoyÄ±n!" } },
                                { id: "bulkildek", name: "BÃºlkildek", level: 4, type: "tiyre", info: { tamga: "BÃš", uran: "MoyÄ±n!", history: "KÃºlew" } }
                            ]
                        },
                        {
                            id: "muyten", name: "MÃšYTEN", level: 3, type: "Ãºlken urÄ±w", tamga: "Ãšsh shanÄ±ÅŸqÄ±", uran: "Aqsholpan",
                            info: { history: "MÃºyÄ±n - moyÄ±n.", origin: "MÃºyten batÄ±r", tamga: "Ãšsh shanÄ±ÅŸqÄ±", uran: "Aqsholpan", population: "540 kibitka", legend: "MÃºytenniÅ„ Ãºsh ulÄ±: Samat, Teli, AbÄ±z" },
                            children: [
                                {
                                    id: "samat", name: "Samat (5)", level: 4, type: "tiyre",
                                    info: { tamga: "SM", uran: "Aqsholpan!" },
                                    children: [
                                        { id: "baibishe", name: "BÃ¡ybishe", level: 5, type: "ko'she", info: { tamga: "BB", uran: "Aqsholpan!" } },
                                        { id: "toqqaragan", name: "Toqalqarag'an", level: 5, type: "ko'she", info: { tamga: "TQ", uran: "Aqsholpan!" } },
                                        { id: "baimurat", name: "Baymurat", level: 5, type: "ko'she", info: { tamga: "BM", uran: "Aqsholpan!" } },
                                        { id: "jolan", name: "Jolan", level: 5, type: "ko'she", info: { tamga: "JL", uran: "Aqsholpan!" } },
                                        { id: "bekau", name: "Bekaw", level: 5, type: "ko'she", info: { tamga: "BK", uran: "Aqsholpan!" } }
                                    ]
                                },
                                {
                                    id: "teli", name: "Teli (5)", level: 4, type: "tiyre",
                                    info: { tamga: "TL", uran: "Aqsholpan!" },
                                    children: [
                                        { id: "tileuberdi", name: "Tilewberdi", level: 5, type: "ko'she", info: { tamga: "TB", uran: "Aqsholpan!" } },
                                        { id: "allaberdi", name: "Allaberdi", level: 5, type: "ko'she", info: { tamga: "AB", uran: "Aqsholpan!" } },
                                        { id: "tangirberdi", name: "TaÅ„irberdi", level: 5, type: "ko'she", info: { tamga: "TB", uran: "Aqsholpan!" } },
                                        { id: "mantyqaragan", name: "MantÄ±qarag'an", level: 5, type: "ko'she", info: { tamga: "MQ", uran: "Aqsholpan!" } },
                                        { id: "molloqaragan", name: "Mollaqarag'an", level: 5, type: "ko'she", info: { tamga: "MQ", uran: "Aqsholpan!" } }
                                    ]
                                },
                                {
                                    id: "abyz-m", name: "AbÄ±z", level: 4, type: "tiyre",
                                    info: { tamga: "AB", uran: "Aqsholpan!", history: "Aqsaqal, Ã¡wliye" },
                                    children: [{ id: "ady", name: "AdÄ±", level: 5, type: "ko'she", info: { tamga: "AD", uran: "Aqsholpan!" } }]
                                },
                                {
                                    id: "kentanau", name: "Ken'tanaw (3)", level: 4, type: "tiyre",
                                    info: { tamga: "KT", uran: "Aqsholpan!" },
                                    children: [
                                        { id: "barn", name: "Barn", level: 5, type: "ko'she", info: { tamga: "BR", uran: "Aqsholpan!" } },
                                        { id: "itaq", name: "Itaq", level: 5, type: "ko'she", info: { tamga: "IT", uran: "Aqsholpan!" } },
                                        { id: "jekensal", name: "Jekensal", level: 5, type: "ko'she", info: { tamga: "JS", uran: "Aqsholpan!" } }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    id: "jauyngyr", name: "JAWÄ±NGÄ±R BÃ“LIMI", level: 2, type: "bÃ³lim",
                    info: { history: "JawÄ±ngÄ±r - 7 urÄ±w.", population: "3660 kibitka" },
                    children: [
                        { id: "teristambaly", name: "TERISTAÅƒBALÄ±", level: 3, type: "urÄ±w", children: [{id:"shomak",name:"Shomaq",level:4,type:"tiyre"},{id:"hangildi",name:"Xangildi",level:4,type:"tiyre"},{id:"baiqaragan",name:"Bayqarag'an",level:4,type:"tiyre"},{id:"elshibai",name:"Elshibay",level:4,type:"tiyre"},{id:"qurban-t",name:"Qurban",level:4,type:"tiyre"},{id:"togai",name:"Tog'ay",level:4,type:"tiyre"},{id:"tyle",name:"Tile",level:4,type:"tiyre"},{id:"tebegen",name:"Tebegen",level:4,type:"tiyre"},{id:"tum",name:"Tum",level:4,type:"tiyre"},{id:"tyrk",name:"TÃºrkistan",level:4,type:"tiyre"}] },
                        { id: "bakanly", name: "BAQANLÄ±", level: 3, type: "urÄ±w", children: [{id:"tanmail-b",name:"TaÅ„mayÄ±l",level:4,type:"tiyre"},{id:"zhananai",name:"Jaqanay",level:4,type:"tiyre"},{id:"naiman-b",name:"Nayman",level:4,type:"tiyre"},{id:"aiys-b",name:"AyÄ±s",level:4,type:"tiyre"}] },
                        { id: "tyekli", name: "TIYEKTI", level: 3, type: "urÄ±w", children: [{id:"shishi-t",name:"Shishi",level:4,type:"tiyre",children:[{id:"shishi-kosh",name:"Shishi",level:5,type:"ko'she"}]},{id:"tumanai-t",name:"Tumanay",level:4,type:"tiyre",children:[{id:"tumanai-kosh",name:"Tumanay",level:5,type:"ko'she"}]},{id:"maulik-t",name:"MÃ¡wlik",level:4,type:"tiyre",children:[{id:"maulik-kosh",name:"MÃ¡wlik",level:5,type:"ko'she"}]},{id:"bairam-t",name:"Bayram",level:4,type:"tiyre",children:[{id:"bairam-kosh",name:"Bayram",level:5,type:"ko'she"}]}] },
                        { id: "yrgaqty", name: "IRÄAQTÄ±", level: 3, type: "urÄ±w", children: [{id:"atanai-y",name:"Atanay",level:4,type:"tiyre",children:[{id:"atanai-kosh",name:"Atanay",level:5,type:"ko'she"}]},{id:"eshkili-y",name:"Eshkili",level:4,type:"tiyre",children:[{id:"eshkili-kosh",name:"Eshkili",level:5,type:"ko'she"}]},{id:"baibura-y",name:"Baybura",level:4,type:"tiyre",children:[{id:"baibura-kosh",name:"Baybura",level:5,type:"ko'she"}]},{id:"sarytan-y",name:"SarÄ±tan",level:4,type:"tiyre",children:[{id:"sarytan-kosh",name:"SarÄ±tan",level:5,type:"ko'she"}]}] },
                        { id: "baimaqty", name: "BAYMAQTÄ±", level: 3, type: "urÄ±w", children: [{id:"saspaq",name:"Saspaq",level:4,type:"tiyre"},{id:"uies",name:"Ãšyes",level:4,type:"tiyre"},{id:"tanmail-bm",name:"TaÅ„mayÄ±l",level:4,type:"tiyre"},{id:"zhananai-bm",name:"Jaqanay",level:4,type:"tiyre"},{id:"naiman-bm",name:"Nayman",level:4,type:"tiyre"},{id:"aiys-bm",name:"AyÄ±s",level:4,type:"tiyre"}] },
                        { id: "kazayakty", name: "QAZAYAQTÄ±", level: 3, type: "urÄ±w", children: [{id:"anetai",name:"Ãnetay",level:4,type:"tiyre"},{id:"zharimbet-k",name:"JÃ¡rÃ­mbet",level:4,type:"tiyre"},{id:"zhundi",name:"JÃºndi",level:4,type:"tiyre"},{id:"sadaq",name:"Sadaq",level:4,type:"tiyre"}] },
                        { id: "uygyr", name: "UYÄÄ±R", level: 3, type: "urÄ±w", children: [{id:"shishi-u",name:"Shishi",level:4,type:"tiyre"},{id:"tumanai-u",name:"Tumanay",level:4,type:"tiyre"},{id:"sabalaq-u",name:"Sabalaq",level:4,type:"tiyre"},{id:"maulik-u",name:"MÃ¡wlik",level:4,type:"tiyre"},{id:"bairam-u",name:"Bayram",level:4,type:"tiyre"},{id:"syrgaly",name:"SÄ±rgalÄ±",level:4,type:"tiyre"}] }
                    ]
                }
            ]
        },
        {
            id: "onTort", name: "ARYS ON TÃ“RT RUW", level: 1, type: "arÄ±s",
            info: { history: "On tÃ³rt ruw - 14 urÄ±w.", population: "10260 kibitka (60%)" },
            children: [
                {
                    id: "kytaÄ±", name: "QITAY", level: 2, type: "Ãºlken urÄ±w", tamga: "Q", uran: "UllÄ± taw",
                    
                    info: { history: "EÅ„ Ãºlken urÄ±w.", tamga: "Q", uran: "UllÄ± taw", population: "4320 kibitka" },
                    children: [
                        { id: "bessary", name: "BESSARI", level: 3, type: "urÄ±w", children: [{id:"zhunli",name:"JÃºnli",level:4,type:"tiyre"},{id:"qoyly",name:"QoylÄ±",level:4,type:"tiyre"}] },
                        { id: "beksyyk", name: "BEKSÄ°YIQ", level: 3, type: "urÄ±w", children: [{id:"zherger",name:"Jerger",level:4,type:"tiyre"},{id:"masai",name:"Masay",level:4,type:"tiyre"},{id:"shyghyrshy",name:"ShÄ±g'Ä±rshÄ±",level:4,type:"tiyre"},{id:"malay",name: "Malay",level:4,type:"tiyre"}] },
                        { id: "kazayakly-k", name: "QAZAYAQLÄ±", level: 3, type: "urÄ±w", children: [{id:"kalsen",name:"KÃ¡lsen",level:4,type:"tiyre"},{id:"kuyik",name:"KÃºyik",level:4,type:"tiyre"},{id:"myrzai",name:"MÄ±rzay",level:4,type:"tiyre"},{id:"qylymoiyn",name:"QÄ±lmoyÄ±n",level:4,type:"tiyre"},{id:"zhylkybai",name:"JÄ±lqÄ±bay",level:4,type:"tiyre"},{id:"baibishe-kz",name:"BÃ¡ybishe",level:4,type:"tiyre",children:[{id:"baibishe-kosh",name:"BÃ¡ybishe",level:5,type:"ko'she"}]}] },
                        { id: "kaishyly", name: "QAYSHÄ±LÄ±", level: 3, type: "urÄ±w", children: [{id:"aqymbet",name:"AqÄ±mbet",level:4,type:"tiyre"},{id:"zhuansan",name:"Juwansan",level:4,type:"tiyre"},{id:"koterehoja",name:"KÃ³terehoja",level:4,type:"tiyre"},{id:"tanamyrza",name:"TanamÄ±rza",level:4,type:"tiyre"},{id:"baqy",name:"BaqÄ±",level:4,type:"tiyre"},{id:"sybyl",name:"SÄ±bÄ±l",level:4,type:"tiyre"},{id:"basar",name:"Basar",level:4,type:"tiyre"},{id:"tolyq",name:"TolÄ±q",level:4,type:"tiyre"},{id:"yaby",name:"YabÄ±",level:4,type:"tiyre"}] },
                        { id: "aitereke", name: "ÃYTEKE", level: 3, type: "urÄ±w", children: [{id:"zhadyq",name:"JÃ¡diq",level:4,type:"tiyre"},{id:"yrsymbek",name:"IrsÄ±mbek",level:4,type:"tiyre"},{id:"orazymbet",name:"OrazÄ±mbet",level:4,type:"tiyre"},{id:"tangirkul",name:"TaÅ„irqÃºl",level:4,type:"tiyre"},{id:"bektes",name:"Bektes",level:4,type:"tiyre",children:[{id:"bektes-kosh",name:"Bektes",level:5,type:"ko'she"}]},{id:"nauriz",name:"NawrÄ±z",level:4,type:"tiyre",children:[{id:"nauriz-kosh",name:"NawrÄ±z",level:5,type:"ko'she"}]},{id:"maniuwli-a",name:"MÃ¡njÃºwli",level:4,type:"tiyre",children:[{id:"maniuwli-kosh",name:"MÃ¡njÃºwli",level:5,type:"ko'she"}]},{id:"tazshylyq",name:"TazshÄ±lÄ±q",level:4,type:"tiyre",children:[{id:"tazshylyq-kosh",name:"TazshÄ±lÄ±q",level:5,type:"ko'she"}]}] },
                        { id: "manjuwli-k", name: "MAÅƒJÃšWLI", level: 3, type: "urÄ±w", children: [{id:"eki-shyiq",name:"Eki shÄ±yÄ±q",level:4,type:"tiyre"},{id:"qaramanjuwli",name:"QaramanjÃºwli",level:4,type:"tiyre"},{id:"aiiereke",name:"Ãyereke",level:4,type:"tiyre"}] },
                        { id: "aralbai", name: "ARALBAY", level: 3, type: "urÄ±w", children: [{id:"aqqala",name:"Aqqala",level:4,type:"tiyre"},{id:"qalmuart-ar",name:"Qalmurat",level:4,type:"tiyre"},{id:"ogizbaishy",name:"Ã“gizbayshÄ±",level:4,type:"tiyre"},{id:"baibishe-ar",name:"BÃ¡ybishe",level:4,type:"tiyre"},{id:"tile-qusshy",name:"Tilew qusshÄ±",level:4,type:"tiyre"}] }
                    ]
                },
                {
                    id: "kypshak", name: "QIPSHAQ", level: 2, type: "Ãºlken urÄ±w", tamga: "I", uran: "Toqsaba",
                    info: { history: "KÃ³ne urÄ±w.", tamga: "I", uran: "Toqsaba", population: "2240 kibitka" },
                    children: [
                        { id: "kangly", name: "QAÅƒLÄ±", level: 3, type: "urÄ±w", children: [{id:"tram",name:"Tram",level:4,type:"tiyre"},{id:"qatqangly",name:"QatqaÅ„lÄ±",level:4,type:"tiyre"},{id:"yrghaqly",name:"Irg'aqlÄ±",level:4,type:"tiyre"},{id:"ashamaily-k",name:"AshamaylÄ±",level:4,type:"tiyre"},{id:"taraqty-k",name:"TaraqtÄ±",level:4,type:"tiyre"},{id:"baspak",name:"Baspaq",level:4,type:"tiyre"},{id:"aiat",name:"Ayat",level:4,type:"tiyre"},{id:"bosyn",name:"BosÄ±n",level:4,type:"tiyre"},{id:"basapat",name:"Basapat",level:4,type:"tiyre"},{id:"konyrqazy",name:"QoÅ„Ä±rqazÄ±",level:4,type:"tiyre"},{id:"kenes",name:"Kenes",level:4,type:"tiyre"},{id:"tashkent",name:"Tashkent",level:4,type:"tiyre"}] },
                        { id: "sanmuryn", name: "SAÅƒMÃšRIN", level: 3, type: "urÄ±w", children: [{id:"konshi",name:"KÃ³nshi",level:4,type:"tiyre"},{id:"tubai",name:"Tubay",level:4,type:"tiyre"},{id:"eshkili",name:"Eshkili",level:4,type:"tiyre"},{id:"zhaipaq-shek",name:"Jaypaq shek",level:4,type:"tiyre"},{id:"tolebai",name:"TÃ³lebay",level:4,type:"tiyre"},{id:"zhabashy",name:"JabashÄ±",level:4,type:"tiyre"}] },
                        { id: "estek", name: "ESTEK", level: 3, type: "urÄ±w", children: [{id:"manqanai",name:"Man'qanay",level:4,type:"tiyre"},{id:"qaiypnazar",name:"QayÄ±pnazar",level:4,type:"tiyre"},{id:"karaterenshi",name:"Qaraterenshi",level:4,type:"tiyre"},{id:"qalmuart-es",name:"Qalmurat",level:4,type:"tiyre"}] },
                        { id: "qanzhygaly", name: "QANJÄ±ÄALÄ±", level: 3, type: "urÄ±w", children: [{id:"shanyshpai",name:"ShanÄ±shpay",level:4,type:"tiyre"},{id:"sambet-q",name:"Sambet",level:4,type:"tiyre"},{id:"zhaghaltai",name:"Jag'altay",level:4,type:"tiyre"},{id:"baibishe-q",name:"BÃ¡ybishe",level:4,type:"tiyre",children:[{id:"baibishe-q-kosh",name:"BÃ¡ybishe",level:5,type:"ko'she"}]}] },
                        { id: "saltyr", name: "SALTIR", level: 3, type: "urÄ±w", children: [{id:"baibishe-s",name:"BÃ¡ybishe",level:4,type:"tiyre"},{id:"sart",name:"Sart",level:4,type:"tiyre"},{id:"orazymbet-s",name:"OrazÄ±mbet",level:4,type:"tiyre"},{id:"shuyghan",name:"Shuylg'an",level:4,type:"tiyre"}] }
                    ]
                },
                {
                    id: "keneges", name: "KENEGES", level: 2, type: "Ãºlken urÄ±w", tamga: "X", uran: "ShawlÄ±-Shawxay",
                    info: { history: "Ken'ges.", tamga: "X", uran: "ShawlÄ±-Shawxay", population: "1480 kibitka" },
                    children: [
                        { id: "aranshy", name: "ARANSHÄ±", level: 3, type: "urÄ±w", children: [{id:"annaqul",name:"Annaqul",level:4,type:"tiyre"},{id:"abas-k",name:"Abas",level:4,type:"tiyre",children:[{id:"seitimbet",name:"Seytimbet",level:5,type:"ko'she"}]},{id:"suiin",name:"SÃºyin",level:4,type:"tiyre"},{id:"zhuas",name:"Juwas",level:4,type:"tiyre"},{id:"dauletqargha",name:"DÃ¡wletqarg'a",level:4,type:"tiyre"},{id:"qaipbergen",name:"QayÄ±pbergen",level:4,type:"tiyre"}] },
                        { id: "aktogyn", name: "AQTOÄIN", level: 3, type: "urÄ±w", children: [{id:"nanzhemes",name:"Nanjemes",level:4,type:"tiyre"},{id:"kosher",name:"KÃ³sher",level:4,type:"tiyre"}] },
                        { id: "omir", name: "Ã“MIR", level: 3, type: "urÄ±w", children: [{id:"aqpyshaq",name:"AqpÄ±shaq",level:4,type:"tiyre"},{id:"usaq",name:"Usaq",level:4,type:"tiyre"},{id:"zhel",name:"Jel",level:4,type:"tiyre"},{id:"mynzhyr",name:"MÄ±njÄ±r",level:4,type:"tiyre"},{id:"otemis-o",name:"Ã“temis",level:4,type:"tiyre"}] },
                        { id: "taraqly-ken", name: "TARAQLÄ±", level: 3, type: "urÄ±w", children: [{id:"zhetiqaraghaz",name:"JetiqaraqazaqÄ±",level:4,type:"tiyre",children:[{id:"zheti-kosh",name:"Jetiqara",level:5,type:"ko'she"}]}] },
                        { id: "dobal", name: "DOBAL", level: 3, type: "urÄ±w" },
                        { id: "oymauyt", name: "OYMAWÄ±T", level: 3, type: "urÄ±w", children: [{id:"qara-o",name:"Qara",level:4,type:"tiyre"},{id:"sary-o",name:"SarÄ±",level:4,type:"tiyre",children:[{id:"zhiydeli",name:"Jiydeli",level:5,type:"ko'she"}]},{id:"aq-o",name:"Aq",level:4,type:"tiyre"}] },
                        { id: "dombazqaq", name: "DOMBAZQAQ", level: 3, type: "urÄ±w" },
                        { id: "nokis", name: "NÃ“KIS", level: 3, type: "urÄ±w", children: [{id:"zhamanzhak",name:"Jamanjaq",level:4,type:"tiyre"},{id:"bozaq",name:"Bozaq",level:4,type:"tiyre"},{id:"altynpyshaq",name:"AltÄ±npÄ±shaq",level:4,type:"tiyre"},{id:"ghobdir",name:"G'obdir",level:4,type:"tiyre"}] }
                    ]
                },
                {
                    id: "mangyt", name: "MAÅƒÄÄ±T", level: 2, type: "Ãºlken urÄ±w", tamga: "f", uran: "ShawlÄ±-Shawxay",
                    info: { history: "Sog'Ä±sqor urÄ±w.", tamga: "f", uran: "ShawlÄ±-Shawxay", population: "2220 kibitka" },
                    children: [
                        { id: "qaratay", name: "QARATAY (Qara)", level: 3, type: "topar", children: [{id:"qaramangyt",name:"Qaraman'ÇµÄ±t",level:4,type:"tiyre",children:[{id:"ushbas",name:"Ãšshbas",level:5,type:"ko'she"},{id:"karasiraq-m",name:"QarasÄ±yraq",level:5,type:"ko'she"},{id:"aqmangyt",name:"Aqman'ÇµÄ±t",level:5,type:"ko'she"}]},{id:"mamyqshy",name:"MamÄ±qshÄ±",level:4,type:"urÄ±w",children:[{id:"zhetiqurt",name:"Jetiqurt",level:5,type:"ko'she"}]},{id:"kosar-m",name:"Qosar",level:4,type:"urÄ±w",children:[{id:"gubidin",name:"G'Ãºbidin",level:5,type:"ko'she"}]},{id:"qylqaly",name:"QÄ±lqalÄ±",level:4,type:"tiyre"}] },
                        { id: "sarytay", name: "SARITAY (SarÄ±)", level: 3, type: "topar", children: [{id:"arshyn",name:"ArshÄ±n",level:4,type:"tiyre"},{id:"zhailyk",name:"JaylÄ±q",level:4,type:"tiyre"},{id:"toqmangyt",name:"Toqman'ÇµÄ±t",level:4,type:"tiyre"},{id:"arsary",name:"ArsarÄ±",level:4,type:"tiyre"},{id:"tazhzhanlyk",name:"TazjanlÄ±q",level:4,type:"tiyre"},{id:"shuyt",name:"ShÃºyt",level:4,type:"tiyre"},{id:"zhamansha",name:"Jamansha",level:4,type:"tiyre"},{id:"esebii",name:"Esebiy",level:4,type:"tiyre"},{id:"tamgaly-m",name:"TamÇµalÄ±",level:4,type:"tiyre"},{id:"toqmoiyin",name:"ToqmoyÄ±n",level:4,type:"tiyre"},{id:"temirhoja",name:"Temirxoja",level:4,type:"tiyre"}] },
                        { id: "boztay", name: "BOZTAY (Boz)", level: 3, type: "topar", children: [{id:"bozta",name:"Bozta",level:4,type:"tiyre",children:[{id:"bozta-kosh",name:"Bozta",level:5,type:"ko'she"}]}] },
                        { id: "jetimtay", name: "JETIMTAY (Jetim)", level: 3, type: "topar", children: [{id:"eshbuga",name:"Eshbug'a",level:4,type:"tiyre",children:[{id:"eshbuga-kosh",name:"Eshbug'a",level:5,type:"ko'she"}]}] }
                    ]
                }
            ]
        }
    ]
};

// ĞĞ°Ğ¹Ñ‚Ğ¸ ÑƒĞ·ĞµĞ» Ğ¿Ğ¾ ID Ğ² Ğ´ĞµÑ€ĞµĞ²Ğµ
function findNodeById(node, id) {
    if (node.id === id) return node;
    if (node.children) {
        for (let child of node.children) {
            const found = findNodeById(child, id);
            if (found) return found;
        }
    }
    return null;
}

// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºÑƒ Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ĞµĞ¹ Ğ´Ğ¾ ĞºĞ¾Ñ€Ğ½Ñ
function getParentChain(node, current = treeData, chain = []) {
    if (current.id === node.id) {
        return [current, ...chain];
    }
    if (current.children) {
        for (let child of current.children) {
            const result = getParentChain(node, child, [current, ...chain]);
            if (result) return result;
        }
    }
    return null;
}

// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµÑ… Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ĞºĞ¾Ğ² ÑƒĞ·Ğ»Ğ°
function getAllDescendants(node) {
    const descendants = [];
    if (node.children) {
        for (let child of node.children) {
            descendants.push(child);
            descendants.push(...getAllDescendants(child));
        }
    }
    return descendants;
}

// ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ€ĞµĞ²Ğ¾ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸ Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ĞºĞ¾Ğ² Ğ¿Ğ¾ Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑĞ¼
function buildDescendantsTree(node) {
    if (!node.children || node.children.length === 0) return null;
    
    const result = [];
    for (let child of node.children) {
        const item = {
            node: child,
            children: child.children || []
        };
        result.push(item);
    }
    return result;
}

// Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒÑ
function openPanel() {
    const panel = document.getElementById('infoPanel');
    const openBtn = document.getElementById('openPanelBtn');
    const statsBox = document.getElementById('statsBox');
    
    panel.classList.remove('collapsed');
    panel.classList.add('active');
    openBtn.classList.remove('visible');
    isPanelOpen = true;
    
    // ĞĞ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ ÑĞ´Ğ²Ğ¸Ğ³Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ
    if (window.innerWidth > 968) {
        statsBox.style.right = '470px';
    }
}

function closePanel() {
    const panel = document.getElementById('infoPanel');
    const openBtn = document.getElementById('openPanelBtn');
    const statsBox = document.getElementById('statsBox');
    
    panel.classList.add('collapsed');
    panel.classList.remove('active');
    openBtn.classList.add('visible');
    isPanelOpen = false;
    
    // ĞĞ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ
    if (window.innerWidth > 968) {
        statsBox.style.right = '10px';
    }
}

function togglePanel() {
    if (isPanelOpen) {
        closePanel();
    } else {
        openPanel();
    }
}

// Ğ‘ÑƒÑ€Ğ³ĞµÑ€ Ğ¼ĞµĞ½Ñ
function toggleBurgerMenu() {
    const burger = document.getElementById('burgerMenu');
    const viewSwitch = document.getElementById('viewSwitch');
    
    burger.classList.toggle('active');
    viewSwitch.classList.toggle('active');
}

function buildTree(node, container) {
    const branch = document.createElement('div');
    branch.className = 'branch';
    const nodeEl = document.createElement('div');
    nodeEl.className = 'node level-' + node.level;
    let htmlContent = '<div class="node-title">' + node.name + '</div>';
    if (node.type) htmlContent += '<div class="node-subtitle">' + node.type + '</div>';
    nodeEl.innerHTML = htmlContent;
    nodeEl.onclick = function() { showInfo(node); };
    nodeEl.id = 'node-' + node.id;
    branch.appendChild(nodeEl);
    if (node.children && node.children.length > 0) {
        const connector = document.createElement('div');
        connector.className = 'connector';
        branch.appendChild(connector);
        const children = document.createElement('div');
        children.className = 'children level-' + (node.level + 1);
        for (let i = 0; i < node.children.length; i++) {
            buildTree(node.children[i], children);
        }
        branch.appendChild(children);
    }
    container.appendChild(branch);
}

function showInfo(node) {
    currentSelectedNode = node;
    
    document.querySelectorAll('.node').forEach(n => n.classList.remove('active'));
    const currentNode = document.getElementById('node-' + node.id);
    if (currentNode) currentNode.classList.add('active');
    
    const panel = document.getElementById('infoPanel');
    const content = document.getElementById('infoContent');
    
    // ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ Ğ½Ğ° ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚
    openPanel();
    
    let html = '<div class="info-header"><div class="info-title">' + node.name + '</div><div class="info-type">' + (node.type || 'Uriw') + '</div></div>';
    
    // Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ°
    const chain = getParentChain(node);
    if (chain && chain.length > 0) {
        html += '<div class="info-section"><h3>ğŸ”— TolÄ±q shejire</h3><div class="hierarchy-chain">';
        chain.reverse().forEach((item, index) => {
            const isLast = index === chain.length - 1;
            html += '<div class="hierarchy-item ' + (isLast ? 'current' : '') + '">';
            html += '<span class="hierarchy-level">' + levelsMap[item.level] + '</span>';
            html += '<span>' + item.name + '</span>';
            if (!isLast) html += '<span class="hierarchy-arrow">â¬‡</span>';
            html += '</div>';
        });
        html += '</div></div>';
    }
    
    const tamga = node.tamga || (node.info && node.info.tamga);
    if (tamga) {
        html += '<div class="tamga-box"><div class="tamga-symbol">' + tamga + '</div><div class="tamga-label">TAMÄA (Uriw belgisi)</div></div>';
    }
    // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ uran (Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)
const uran = node.uran || (node.info && node.info.uran);

// ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ±Ğ»Ğ¾Ğº Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¸ Ğ½Ğµ Ğ¿ÑƒÑÑ‚Ğ¾Ğµ
if (uran && String(uran).trim() !== '') {
    html += `
        <div class="uran-box">
            <div class="uran-text">${uran}</div>
            <div class="uran-label">URAN (SoÄŸ'Ä±s uranÄ±)</div>
        </div>
    `;
}
    if (node.info) {
    const fields = [
        { key: 'history',     icon: 'ğŸ“œ', title: 'Tariyx' },
        { key: 'origin',      icon: 'ğŸ§¬', title: 'Kelip shÄ±g\'Ä±wÄ±' },
        { key: 'legend',      icon: 'ğŸŒŸ', title: 'AÅ„Ä±z' },
        { key: 'population',  icon: 'ğŸ‘¥', title: 'SanÄ±' },
        { key: 'structure',   icon: 'ğŸ—ï¸', title: 'QurilÄ±mÄ±' },
        { key: 'region',      icon: 'ğŸŒ', title: 'Jeri' },
        { key: 'language',    icon: 'ğŸ—£ï¸', title: 'Til' }
        // 'warrior' ÑƒĞ±Ñ€Ğ°Ğ½Ğ¾, Ñ‚.Ğº. Ñ‚Ğ°ĞºĞ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½ĞµÑ‚
        // Ğ•ÑĞ»Ğ¸ Ğ² Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¼ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ â€” Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ±ÑƒĞ´ĞµÑ‚ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ
    ];

    fields.forEach(field => {
        if (node.info[field.key]) {
            html += '<div class="info-section"><h3>' 
                + field.icon + ' ' + field.title 
            + '</h3><p>' + node.info[field.key] + '</p></div>';
        }
    });
}
    
    // Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²ÑĞµÑ… Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ĞºĞ¾Ğ²
    if (node.children && node.children.length > 0) {
        const descendantsTree = buildDescendantsTree(node);
        html += '<div class="stats-box"><div class="stats-number">' + getAllDescendants(node).length + '</div><div> BarlÄ±q uriwdar</div></div>';
        
        html += '<div class="info-section"><h3>ğŸ‘‡ TÃ³men toparlar</h3>';
        html += '<div class="descendants-list">';
        
        descendantsTree.forEach(group => {
            html += '<div class="descendant-group">';
            html += '<div class="descendant-parent">';
            html += '<span style="color: var(--accent-yellow);">' + group.node.name + '</span>';
            html += ' <span style="font-size: 0.8em; opacity: 0.7;">(' + levelsMap[group.node.level] + ')</span>';
            html += '</div>';
            
            if (group.children.length > 0) {
                html += '<div class="descendant-children">';
                group.children.forEach(child => {
                    html += '<div class="descendant-child">';
                    html += '<span class="descendant-bullet"></span>';
                    html += '<span>' + child.name + '</span>';
                    if (child.children && child.children.length > 0) {
                        html += ' <span style="font-size: 0.75em; color: var(--accent-orange);">+' + getAllDescendants(child).length + '</span>';
                    }
                    html += '</div>';
                });
                html += '</div>';
            }
            html += '</div>';
        });
        
        html += '</div></div>';
    }
    
    html += '<div class="info-section"><h3>ğŸ“Š DÃ¡reje</h3><p>' + levelsMap[node.level] + ' (' + node.level + ')</p></div>';
    
    content.innerHTML = html;
}

function searchNode() {
    const input = document.getElementById('searchInput').value.toLowerCase();
    const nodes = document.querySelectorAll('.node');
    nodes.forEach(node => {
        if (node.textContent.toLowerCase().includes(input) && input.length > 0) {
            node.classList.add('highlight');
            node.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
            node.classList.remove('highlight');
        }
    });
}

// ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹
document.addEventListener('DOMContentLoaded', function() {
    buildTree(treeData, document.getElementById('tree'));
    
    // ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
    document.getElementById('closePanelBtn').addEventListener('click', closePanel);
    
    // ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
    document.getElementById('openPanelBtn').addEventListener('click', function() {
        if (currentSelectedNode) {
            openPanel();
        } else {
            // Ğ•ÑĞ»Ğ¸ Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ¾, Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
            alert(' AldÄ±n\' menen tuwdÄ± tan\'lan\' ');
        }
    });
    
    // Ğ‘ÑƒÑ€Ğ³ĞµÑ€ Ğ¼ĞµĞ½Ñ
    document.getElementById('burgerMenu').addEventListener('click', toggleBurgerMenu);
    
    // Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ±ÑƒÑ€Ğ³ĞµÑ€ Ğ¼ĞµĞ½Ñ Ğ¿Ñ€Ğ¸ ĞºĞ»Ğ¸ĞºĞµ Ğ½Ğ° ÑÑÑ‹Ğ»ĞºÑƒ
    document.querySelectorAll('.view-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            if (window.innerWidth <= 768) {
                toggleBurgerMenu();
            }
        });
    });
    
    // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ¾ĞºĞ½Ğ°
    window.addEventListener('resize', function() {
        if (window.innerWidth > 968) {
            // ĞĞ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸, ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ° Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ°
            if (!isPanelOpen) {
                document.getElementById('openPanelBtn').classList.add('visible');
            }
        } else {
            // ĞĞ° Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¼ ÑĞºÑ€Ñ‹Ğ²Ğ°ĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
            document.getElementById('openPanelBtn').classList.remove('visible');
        }
    });
});
    </script>



<!-- Ğ“Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ğ¹ -->
<div class="info-section" style="margin-top: 40px;">
    <h3 style="color: var(--accent-yellow); margin-bottom: 20px;">ğŸ“š Glosariy</h3>
    
    <div class="glossary-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
        
        <div class="rule-card">
            <h4>ArÄ±s</h4>
            <p>UllÄ± urÄ±wlÄ±q birlespe (plemya). Qaraqalpaqtlarda eki tiykarÇµÄ± arÄ±s bar: QoÅ„Ä±rat hÃ¡m On tÃ³rt ruu.</p>
        </div>
        
        <div class="rule-card">
            <h4>BÃ³lim</h4>
            <p>ArÄ±stÄ±Å„ ishindegi Ãºlken top. MÄ±salÄ±, ShulÄ±q hÃ¡m JauÄ±Å„ÇµÄ±r â€” QoÅ„Ä±rat arÄ±sÄ±nÄ±Å„ bÃ³limleri.</p>
        </div>
        
        <div class="rule-card">
            <h4>Ãšlken urÄ±w</h4>
            <p>BÃ³limdiÅ„ ishindegi birneshe urÄ±wdÄ± birlestiriwshi top. MÄ±sallar: QÄ±yat, AshamaylÄ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Uruw</h4>
            <p>TiykarÇµÄ± tuwÄ±slÄ±q birlik. Ortaq atadan taraqan adamlar tobÄ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Tiyre</h4>
            <p>UruwdÄ±Å„ ishindegi kishi bolinis. Ãdetle urÄ±wdÄ±Å„ belgili bir butaÇµÄ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>KÃ³she</h4>
            <p>EÅ„ kishi tuwÄ±slÄ±q birlik. TiyreniÅ„ ishindegi top yamasa Ã³yler tobÄ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Tamga</h4>
            <p>UruwlÄ±q belgi, mÃ³r. Ãdetle janÄ±warlar yamasa jatlar beynesinde boladÄ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>Uran</h4>
            <p>SoyÄ±s urawÄ±, urÄ±wdÄ±Å„ shapqÄ±nshÄ±lÄ±q waqtÄ±ndagÄ± ayqayÄ±. UruwdÄ± birlestiriwshi belgi.</p>
        </div>
        
        <div class="rule-card">
            <h4>Ekzogamiya</h4>
            <p>Ã“z urÄ±wanan tÄ±s nekelew erejesi. Qaraqalpaq dÃ¡stÃºrinde qataq saqtaladÄ±.</p>
        </div>
        
        <div class="rule-card">
            <h4>QarÄ±msaq</h4>
            <p>Uruw ishindegi neke, incest. Qaraqalpaq qogamÄ±nda qataq tiyÄ±m salÄ±nÇµan.</p>
        </div>
        
        <div class="rule-card">
            <h4>Shejire</h4>
            <p>UruwlÄ±q tegi, ata-babalardÄ±Å„ tizimi. AwÄ±zsha da, jazbasha da jetkiziledi.</p>
        </div>
        
        <div class="rule-card">
            <h4>Qasiyet</h4>
            <p>Qaraqalpaq Ã¡detlik quqÄ±ÇµÄ±, dÃ¡stÃºrli normalar jÃºyesi.</p>
        </div>
    </div>
</div>

<!-- Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ Ğ¸ Ğ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° -->
<div class="info-section" style="margin-top: 40px;">
    <h3 style="color: var(--accent-yellow); margin-bottom: 20px;">ğŸ“– PaydalanÄ±lÇµan derekler</h3>
    
    <div style="background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px;">
        <h4 style="color: var(--accent-cyan); margin-bottom: 15px;">TiykarÇµÄ± Ã¡debiyatlar</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8; color: var(--text-secondary);">
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                AqÄ±nov Ç´. <em>Qaraqalpaq etnografiyasÄ±</em>. â€” NÃ³kis: Bilim, 1995.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                JolÄ±mbetov Ã. <em>Qaraqalpaq shejiresi</em>. â€” NÃ³kis: Qaraqalpaqstan, 2003.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                Muratov S. <em>QoÅ„Ä±rat arÄ±sÄ±</em>. â€” Tashkent: Fan, 1982.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                Tilewmuratova R. <em>Qaraqalpaq urÄ±wlÄ±q qurÄ±lÄ±mÄ±</em>. â€” NÃ³kis: 2010.
            </li>
        </ul>
        
        <h4 style="color: var(--accent-cyan); margin: 20px 0 15px 0;">Arxivlik derekler</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8; color: var(--text-secondary);">
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                OrÄ±nbar qazaq dalasÄ± jÃ³nindegi jarlÄ±qlar jÄ±maÇµÄ± (1844-1868)
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                TÃºrkistan Ã³lkelÄ±q statistikalÄ±q komiteti maÇµlÄ±wmatlarÄ± (1887-1917)
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                Qaraqalpaq ASSR xalÄ±q sharuwashÄ±lÄ±ÄŸÄ± esebi (1926-1939)
            </li>
        </ul>
        
        <h4 style="color: var(--accent-cyan); margin: 20px 0 15px 0;">Izertlew jumÄ±slarÄ±</h4>
        <ul style="list-style: none; padding: 0; line-height: 1.8; color: var(--text-secondary);">
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                Basilov V.N. <em>Kult svyatyh v islame</em>. â€” M.: 1970.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                Troytskaya A.L. <em>K voprosu o rodo-plemennom sostave karakalpakow</em> // SE. â€” 1937. â€” â„–4.
            </li>
            <li style="margin-bottom: 10px; padding-left: 20px; position: relative;">
                <span style="position: absolute; left: 0; color: var(--accent-yellow);">â€¢</span>
                Jdanko T.A. <em>Karakalpakskie rodo-plemennye traditsii</em>. â€” M.: 1950.
            </li>
        </ul>
        
        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border-color); font-size: 0.9em; color: var(--text-secondary);">
            <p><strong>Eskertpe:</strong> Bul joba akademiyalÄ±q hÃ¡m mÃ¡deniy-agartÄ±w maqsatÄ±nda jasalÇµan. UruwlÄ±q tegdi naqtÄ± anÄ±qlaw ushÄ±n arnawlÄ± shejireshi-genealoglarga jÃºginiw usÄ±nÄ±s etiledi.</p>
        </div>
    </div>
</div>
<footer>
    <div style="background: linear-gradient(135deg, rgba(231,76,60,0.1), rgba(241,196,15,0.1)); border: 2px solid var(--accent-orange); border-radius: 15px; padding: 25px; margin: 30px 0; text-align: center;">
    <h3 style="color: var(--accent-yellow); margin-bottom: 15px; font-size: 1.5em;">
        ğŸ“¢ SizdiÅ„ jÃ¡rdemiÅ„iz kerek!
    </h3>
    
    <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px;">
        Bul sayt â€” Qaraqalpaq rularÄ± haqqÄ±ndaÇµÄ± maÇµlÄ±wmatlar bazasÄ±. 
        Eger siz <strong>qatelikler</strong>, <strong>kemshilikler</strong> tabÄ±p jatqan bolsaÅ„Ä±z, 
        Ã³tinemiz, bizge xabar beriÅ„!
    </p>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; text-align: left; margin: 20px 0;">
        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
            <h4 style="color: var(--accent-cyan); margin-bottom: 10px;">ğŸ“ Neni xabarlay alasiz?</h4>
            <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 1.8;">
                <li>Qatelikler (tuwrÄ± emes atamalar)</li>
                <li>QosÄ±msha maÇµlÄ±wmatlar</li>
                <li>Shejiredegi jaramsÄ±z baylanÄ±slar</li>
                <li>TamÇµa/uran tÃ¼zetiwleri</li>
            </ul>
        </div>
        
        <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px;">
            <h4 style="color: var(--accent-cyan); margin-bottom: 10px;">ğŸ“¬ BaylanÄ±s usullarÄ±:</h4>
            <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 1.8;">
                <!-- <li><a href="https://github.com/abdimuratovbahrom/qaraqalpaq-rulari/issues" target="_blank" style="color: var(--accent-blue);">GitHub Issues</a></li> -->
               <li>ğŸ“§ Email: <a href="mailto:qaraqalpaq.rulari@gmail.com" style="color: var(--accent-blue); text-decoration: none;">qaraqalpaq.rulari@gmail.com</a></li>
        <li>ğŸ’¬ Telegram: <a href="https://t.me/qaraqalpaq_rulari" target="_blank" style="color: var(--accent-blue); text-decoration: none;">@qaraqalpaq_rulari</a></li>
            </ul>
        </div>
    </div>
    
    <p style="color: var(--accent-green); font-style: italic; margin-top: 15px;">
        ğŸ™ Qaraqalpaq shejiresin saqtawda sizde jardem beriÅ„!
    </p>
</div>

    <div style="text-align: center; padding: 20px; font-size: 0.9em; color: var(--text-secondary);">
        <p>Â© 2024 Qaraqalpaq UriwlÄ±q Tegi. BarlÄ±q quqÄ±q qorÇµalÇµan.</p>
        <p>JasawshÄ±lar: [Bake9791].</p>
    </div>
</footer>
</body>
</html>